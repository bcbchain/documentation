<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="robots" content="index,follow">
    <meta name="author" content="bcb-project">
    <meta name="application-name" content="bcbchain.io">
    <meta name="renderer" content="ie-stand">
    <title>跨链转账</title>
    <meta property="og:type" content="website" />
    <meta property="og:title" content="BCB Documentation" />
    <meta property="og:description" content="BCB Documentation" />
    <meta property="og:image" content="/img/twitter-img.jpg" />
    <meta name="twitter:title" content="BCB Documentation" />
    <meta name="twitter:description" content="BCB Documentation" />
    <meta name="twitter:image" content="/img/twitter-img.jpg" />
    <meta name="twitter:card" content="summary_large_image" />

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png">
    <link rel="manifest" href="/img/site.webmanifest">
    <link rel="mask-icon" href="/img/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#00aba9">
    <meta name="theme-color" content="#ffffff">

    <link href="/lib/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="/lib/animate.css/animate.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/styles/default.min.css">
    <link href="/lib/font-awesome/css/all.min.css" rel="stylesheet" />
    <link href="/css/site.min.css?v=20191106" rel="stylesheet" />
</head>
<body data-spy="scroll" data-target="#navbar-sidenav">
    <nav class="navbar fixed-top navbar-expand-lg py-1 px-3 px-sm-4 px-md-5">
        <a class="navbar-brand" href="https://bcbchain.io">
            <img class="logo" src="/img/logo.png" alt="BCB Logo" />
            <img class="logo-dark" src="/img/logo-dark.png" alt="BCB Logo" />
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <i class="fas fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/docs/index.html">Documentation</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/tutorial/index.html">Tutorial</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/faq/index.html">FAQ</a>
                </li>
                <li class="nav-item" style="margin-right: 100px">
                    <a class="nav-link" href="/articles/index.html">Articles</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link d-inline-block" href="javascript:" onclick="languageEx('en-us')">EN</a>|<a class="nav-link d-inline-block" href="javascript:" onclick="languageEx('zh-cn')">中文</a>
                </li>
            </ul>
            <form class="form-inline my-2 my-lg-0 d-none">
                <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
            </form>
        </div>
    </nav>
    <div class="container-fluid" style="margin-top: 55px">
        <div class="row d-flex">
            <div class="d-none d-md-block catalog py-2 py-md-5 pl-md-3">
                <div class="search-bar">
                    <span class="search-de">X</span>
                    <input id="sInput" placeholder="search" />
                    <div class="search-re">
                        <ul id="sResult"></ul>
                    </div>
                </div>
                
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/站点地图.html'>站点地图</a>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>BCB基础</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/01-BCB基础/01-BCB介绍.html'>BCB介绍</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/01-BCB基础/02-BCB节点.html'>BCB节点</a>
</nav>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>BCB网络</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/02-BCB网络/01-主网与测试网.html'>主网与测试网</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/02-BCB网络/02-私链搭建指南.html'>私链搭建指南</a>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>BCB侧链</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/02-BCB网络/BCB侧链/01-侧链注册.html'>侧链注册</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/02-BCB网络/BCB侧链/02-侧链创世.html'>侧链创世</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/02-BCB网络/BCB侧链/03-侧链治理.html'>侧链治理</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/02-BCB网络/BCB侧链/04-跨链交易.html'>跨链交易</a>
</nav>
</nav>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>BCB工具箱</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/03-BCB工具箱/01-概述.html'>概述</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/03-BCB工具箱/02-bcw.html'>bcw</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/03-BCB工具箱/03-bcc.html'>bcc</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/03-BCB工具箱/04-smccheck.html'>smccheck</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/03-BCB工具箱/05-smcpack.html'>smcpack</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/03-BCB工具箱/06-sigorg.html'>sigorg</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/03-BCB工具箱/07-addr.html'>addr</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/03-BCB工具箱/08-orgid.html'>orgid</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/03-BCB工具箱/09-genesis.html'>genesis</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/03-BCB工具箱/10-txparse.html'>txparse</a>
</nav>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>智能合约开发</span>
<nav class='nav nav-pills flex-column ml-3'>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>智能合约(golang)</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/04-智能合约开发/智能合约(golang)/01-概述.html'>概述</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/04-智能合约开发/智能合约(golang)/02-编程实例.html'>编程实例</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/04-智能合约开发/智能合约(golang)/03-深入理解.html'>深入理解</a>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>开发智能合约</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/04-智能合约开发/智能合约(golang)/开发智能合约/01-开发环境.html'>开发环境</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/04-智能合约开发/智能合约(golang)/开发智能合约/02-第一个智能合约.html'>第一个智能合约</a>
</nav>
</nav>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>智能合约(solidity)</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/04-智能合约开发/智能合约(solidity)/01-BVM与EVM差异说明.html'>BVM与EVM差异说明</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/04-智能合约开发/智能合约(solidity)/02-合约开发.html'>合约开发</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/04-智能合约开发/智能合约(solidity)/03-合约部署调用.html'>合约部署调用</a>
</nav>
</nav>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>交易所对接指南</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/05-交易所对接指南/01-集成方案介绍.html'>集成方案介绍</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/05-交易所对接指南/02-安装部署.html'>安装部署</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/05-交易所对接指南/03-命令详解.html'>命令详解</a>
</nav>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>开发参考</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/06-开发参考/01-概述.html'>概述</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/06-开发参考/02-模型说明.html'>模型说明</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/06-开发参考/03-算法说明.html'>算法说明</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/06-开发参考/04-交易格式v1.html'>交易格式v1</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/06-开发参考/05-交易格式v2.html'>交易格式v2</a>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>主链API</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/06-开发参考/01-主链API/01-通讯协议.html'>通讯协议</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/06-开发参考/01-主链API/02-网络接口.html'>网络接口</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/06-开发参考/01-主链API/03-区块接口.html'>区块接口</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/06-开发参考/01-主链API/04-交易接口.html'>交易接口</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/06-开发参考/01-主链API/05-世界接口.html'>世界接口</a>
</nav>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>智能合约API</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/06-开发参考/02-智能合约API/01-概述.html'>概述</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/06-开发参考/02-智能合约API/02-Functions.html'>Functions</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/06-开发参考/02-智能合约API/03-sdk.types.html'>sdk.types</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/06-开发参考/02-智能合约API/04-sdk.bn.html'>sdk.bn</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/06-开发参考/02-智能合约API/05-sdk.crypto.ed25519.html'>sdk.crypto.ed25519</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/06-开发参考/02-智能合约API/06-sdk.crypto.sha3.html'>sdk.crypto.sha3</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/06-开发参考/02-智能合约API/07-Toolbox.html'>Toolbox</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/06-开发参考/02-智能合约API/08-Interfaces.html'>Interfaces</a>
</nav>
<span class='ml-0 my-1 nav-link'><i class='fas fa-caret-right'></i>交易所API</span>
<nav class='nav nav-pills flex-column ml-3'>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/06-开发参考/03-交易所API/01-通讯协议.html'>通讯协议</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/06-开发参考/03-交易所API/02-钱包接口.html'>钱包接口</a>
<a class='ml-0 my-1 nav-link' href='/docs/zh-cn/06-开发参考/03-交易所API/03-区块链接口.html'>区块链接口</a>
</nav>
</nav>
</nav>
            </div>
            <main class="p-3 p-sm-4 p-md-5">
                <a class="d-block d-md-none" href="javascript:" onclick="showCatalog()">Show / Hide Table of Contents</a>
                <h1 id='fe406908'><span class='bd-content-title'>跨链转账<a class='anchorjs-link ' href='#fe406908' aria-label='Anchor' data-anchorjs-icon='#'></a></span></h1>
<blockquote class='bd-callout with-space'>
<p class='with-space'>在本章，我们将以搭建的侧链 <code>SmartCity</code> 和侧链 EShop 为基础，体验一下如何进行跨链转账。</p>
<p class='with-space'>BCB链支持三种模式的跨链转账，分别是：主链到侧链、侧链到主链以及侧链到侧链的跨链转账。</p>
</blockquote>
<h2 id='a8c7183e'><span class='bd-content-title'>1. 准备工作<a class='anchorjs-link ' href='#a8c7183e' aria-label='Anchor' data-anchorjs-icon='#'></a></span></h2>
<h3 id='f0e412fa'><span class='bd-content-title'>1.1 准备账户<a class='anchorjs-link ' href='#f0e412fa' aria-label='Anchor' data-anchorjs-icon='#'></a></span></h3>
<p class='with-space'>为侧链准备一个转入转出账户，现在我们假设创建的账户用户名为 <code>scAccount</code> ，密码为 Ab1@Cd3$ ，在侧链 <code>SmartCity</code> 的账户地址为 local[SmartCity]HMpSyt2Jk5BiFiR2j45nGGjToF9miUVaG ，在侧链 <code>EShop</code> 的账户地址为 local[EShop]HMpSyt2Jk5BiFiR2j45nGGjToF9miUVaG 。</p>
<blockquote class='bd-callout with-space'>
<p class='with-space'>学习如何创建账户，请参考： <a href='../../03-BCB工具箱\02-bcw.html'> BCB工具箱 - bcw工具</a> </p>
</blockquote>
<h2 id='ca334763'><span class='bd-content-title'>2. 基础代币跨链转账<a class='anchorjs-link ' href='#ca334763' aria-label='Anchor' data-anchorjs-icon='#'></a></span></h2>
<h3 id='b19d279b'><span class='bd-content-title'>2.1 主链到侧链转账<a class='anchorjs-link ' href='#b19d279b' aria-label='Anchor' data-anchorjs-icon='#'></a></span></h3>
<p class='with-space'>主链到侧链的转账，我们使用主链的owner账户去给 <code>步骤1</code> 中准备的 SmartCity 侧链的转入转出账户地址 <code>local[SmartCity]HMpSyt2Jk5BiFiR2j45nGGjToF9miUVaG</code> 转账，转账前我们先查询一下该账户在侧链 SmartCity 上的账户余额，如下我们以主链的基础代币为 <code>LOC</code> 为例展示如何查询账户余额：</p>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text='./bcc balance --accAddress=&quot;local[SmartCity]HMpSyt2Jk5BiFiR2j45nGGjToF9miUVaG&quot; --tokenName=&quot;LOC&quot; --chainid local[SmartCity]

返回结果如下表示查询成功:
OK
Response: [
  {
    &quot;tokenAddress&quot;: &quot;local[SmartCity]AJrbk6Wdf7TCbunrXXS5kKvbWVszhC1TA&quot;,
    &quot;tokenName&quot;: &quot;LOC&quot;,
    &quot;balance&quot;: &quot;0&quot;
  }
]'>Copy</button><pre><code>./bcc balance --accAddress=&quot;local[SmartCity]HMpSyt2Jk5BiFiR2j45nGGjToF9miUVaG&quot; --tokenName=&quot;LOC&quot; --chainid local[SmartCity]

返回结果如下表示查询成功:
OK
Response: [
  {
    &quot;tokenAddress&quot;: &quot;local[SmartCity]AJrbk6Wdf7TCbunrXXS5kKvbWVszhC1TA&quot;,
    &quot;tokenName&quot;: &quot;LOC&quot;,
    &quot;balance&quot;: &quot;0&quot;
  }
]
</code></pre>
</figure>
<p class='with-space'>如上我们可见新建账户的基础代币余额为0。</p>
<p class='with-space'>下面我们还是以基础代币 <code>LOC</code> 为例，展示如何从主链的 owner 账户向侧链的 <code>scAccount</code> 账户进行主链到侧链的跨链转账操作:</p>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text='./bcc transfer --name owner --password Ab1@Cd3$ --token LOC --gasLimit 100000  --to local[SmartCity]HMpSyt2Jk5BiFiR2j45nGGjToF9miUVaG --value 100 --chainid local

返回结果如下表示操作成功:
OK
Response: {
  &quot;code&quot;: 200,
  &quot;log&quot;: &quot;&quot;,
  &quot;fee&quot;: 5000000,
  &quot;txHash&quot;: &quot;0x6C8C4A3324C87ECE2EC85F03D25D3994AB5BE31183AED6F7D8044CA2CCC0F25F&quot;,
  &quot;height&quot;: 25974
}'>Copy</button><pre><code>./bcc transfer --name owner --password Ab1@Cd3$ --token LOC --gasLimit 100000  --to local[SmartCity]HMpSyt2Jk5BiFiR2j45nGGjToF9miUVaG --value 100 --chainid local

返回结果如下表示操作成功:
OK
Response: {
  &quot;code&quot;: 200,
  &quot;log&quot;: &quot;&quot;,
  &quot;fee&quot;: 5000000,
  &quot;txHash&quot;: &quot;0x6C8C4A3324C87ECE2EC85F03D25D3994AB5BE31183AED6F7D8044CA2CCC0F25F&quot;,
  &quot;height&quot;: 25974
}
</code></pre>
</figure>
<p class='with-space'>命令行中选项 <code>to</code> 为侧链账户 scAccount 的账户地址， <code>value</code> 为跨链转账金额，单位为 LOC 。</p>
<p class='with-space'>等待5秒左右，我们再到侧链上去查询一下账户地址 <code>local[SmartCity]HMpSyt2Jk5BiFiR2j45nGGjToF9miUVaG</code> 对应的账户余额:</p>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text='./bcc balance --accAddress=&quot;local[SmartCity]HMpSyt2Jk5BiFiR2j45nGGjToF9miUVaG&quot; --tokenName=&quot;LOC&quot; --chainid local[SmartCity]

返回结果如下表示操作成功:
OK
Response: [
  {
    &quot;tokenAddress&quot;: &quot;local[SmartCity]AJrbk6Wdf7TCbunrXXS5kKvbWVszhC1TA&quot;,
    &quot;tokenName&quot;: &quot;LOC&quot;,
    &quot;balance&quot;: &quot;100000000000&quot;
  }
]'>Copy</button><pre><code>./bcc balance --accAddress=&quot;local[SmartCity]HMpSyt2Jk5BiFiR2j45nGGjToF9miUVaG&quot; --tokenName=&quot;LOC&quot; --chainid local[SmartCity]

返回结果如下表示操作成功:
OK
Response: [
  {
    &quot;tokenAddress&quot;: &quot;local[SmartCity]AJrbk6Wdf7TCbunrXXS5kKvbWVszhC1TA&quot;,
    &quot;tokenName&quot;: &quot;LOC&quot;,
    &quot;balance&quot;: &quot;100000000000&quot;
  }
]
</code></pre>
</figure>
<p class='with-space'>因为余额显示的单位为 <code>cong</code> ，所以需要在数值 100 基础上乘上10的9次方。如果查询账户余额未到账(可能是还未到账),可以通过获取 <code>跨链事务Hash</code> 到目标链查询这笔跨链事务的状态(参考第二章 跨链事务).如果该笔跨链事务状态显示已完成,但是再次查询余额依然未到账,可以根据第二章跨链事务查询交易失败原因.</p>
<h3 id='e8a49fb4'><span class='bd-content-title'>2.2 侧链到主链转账<a class='anchorjs-link ' href='#e8a49fb4' aria-label='Anchor' data-anchorjs-icon='#'></a></span></h3>
<p class='with-space'>我们上面给侧链的 <code>scAccount</code> 转入了100个 LOC ，现在如果我们想把资金转回到主链的话可以通过侧链向主链转账的方式完成，首先我们在主链查询账户 <code>scAccount</code> 对应的地址 localHMpSyt2Jk5BiFiR2j45nGGjToF9miUVaG 在主链上的账户余额：</p>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text='./bcc balance --accAddress=&quot;localHMpSyt2Jk5BiFiR2j45nGGjToF9miUVaG&quot; --tokenName=&quot;LOC&quot; --chainid local

返回结果如下:
OK
Response: [
  {
    &quot;tokenAddress&quot;: &quot;localAJrbk6Wdf7TCbunrXXS5kKvbWVszhC1TA&quot;,
    &quot;tokenName&quot;: &quot;LOC&quot;,
    &quot;balance&quot;: &quot;0&quot;
  }
]'>Copy</button><pre><code>./bcc balance --accAddress=&quot;localHMpSyt2Jk5BiFiR2j45nGGjToF9miUVaG&quot; --tokenName=&quot;LOC&quot; --chainid local

返回结果如下:
OK
Response: [
  {
    &quot;tokenAddress&quot;: &quot;localAJrbk6Wdf7TCbunrXXS5kKvbWVszhC1TA&quot;,
    &quot;tokenName&quot;: &quot;LOC&quot;,
    &quot;balance&quot;: &quot;0&quot;
  }
]
</code></pre>
</figure>
<p class='with-space'>然后用以下命令进行转账：</p>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text='./bcc transfer --name scAccount --password Ab1@Cd3$ --token LOC --gasLimit 100000  --to localHMpSyt2Jk5BiFiR2j45nGGjToF9miUVaG --value 10 --chainid local[SmartCity]

返回结果如下表示成功:
OK
Response: {
  &quot;code&quot;: 200,
  &quot;log&quot;: &quot;&quot;,
  &quot;fee&quot;: 10000000,
  &quot;txHash&quot;: &quot;0x20B5238E777BDA4D7F883C0698C608C30874A080DCB2FAAAFD1C8EF4FBD98098&quot;,
  &quot;height&quot;: 6225
}'>Copy</button><pre><code>./bcc transfer --name scAccount --password Ab1@Cd3$ --token LOC --gasLimit 100000  --to localHMpSyt2Jk5BiFiR2j45nGGjToF9miUVaG --value 10 --chainid local[SmartCity]

返回结果如下表示成功:
OK
Response: {
  &quot;code&quot;: 200,
  &quot;log&quot;: &quot;&quot;,
  &quot;fee&quot;: 10000000,
  &quot;txHash&quot;: &quot;0x20B5238E777BDA4D7F883C0698C608C30874A080DCB2FAAAFD1C8EF4FBD98098&quot;,
  &quot;height&quot;: 6225
}
</code></pre>
</figure>
<p class='with-space'>查询一下收款地址的账户余额：</p>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text='./bcc balance --accAddress=&quot;localHMpSyt2Jk5BiFiR2j45nGGjToF9miUVaG&quot; --tokenName=&quot;LOC&quot; --chainid local
OK
Response: [
  {
    &quot;tokenAddress&quot;: &quot;localAJrbk6Wdf7TCbunrXXS5kKvbWVszhC1TA&quot;,
    &quot;tokenName&quot;: &quot;LOC&quot;,
    &quot;balance&quot;: &quot;10000000000&quot;
  }
]'>Copy</button><pre><code>./bcc balance --accAddress=&quot;localHMpSyt2Jk5BiFiR2j45nGGjToF9miUVaG&quot; --tokenName=&quot;LOC&quot; --chainid local
OK
Response: [
  {
    &quot;tokenAddress&quot;: &quot;localAJrbk6Wdf7TCbunrXXS5kKvbWVszhC1TA&quot;,
    &quot;tokenName&quot;: &quot;LOC&quot;,
    &quot;balance&quot;: &quot;10000000000&quot;
  }
]
</code></pre>
</figure>
<p class='with-space'>经查询发现将资金从侧链转回主链成功,确认跨链转账成功.如果查询账户余额未到账(可能是还未到账)，可以通过获取 <code>跨链事务Hash</code> 到目标链查询这笔跨链事务的状态(参考第二章 跨链事务)。如果该笔跨链事务状态显示已完成，但是再次查询余额依然未到账，可以根据第二章跨链事务查询交易失败原因。</p>
<h3 id='ce3f4f70'><span class='bd-content-title'>2.3 侧链到侧链转账<a class='anchorjs-link ' href='#ce3f4f70' aria-label='Anchor' data-anchorjs-icon='#'></a></span></h3>
<p class='with-space'>那么如果想要从一个侧链往另一个侧链转账,我们应该怎么做呢?</p>
<p class='with-space'>首先我们准备好另一个侧链 <code>EShop</code> ，详情请参考: <a href='01-侧链注册.html'> 侧链注册</a> 和 <a href='02-侧链创世.html'> 侧链创世</a> 。</p>
<p class='with-space'>首先我们先查询一下 <code>EShop</code> 链的地址 local[EShop]HMpSyt2Jk5BiFiR2j45nGGjToF9miUVaG 的账户余额：</p>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text='./bcc balance --accAddress=&quot;local[EShop]HMpSyt2Jk5BiFiR2j45nGGjToF9miUVaG&quot; --tokenName=&quot;LOC&quot; --chainid local[EShop]

返回结果如下表示操作成功:
OK
Response: [
  {
    &quot;tokenAddress&quot;: &quot;local[EShop]AJrbk6Wdf7TCbunrXXS5kKvbWVszhC1TA&quot;,
    &quot;tokenName&quot;: &quot;LOC&quot;,
    &quot;balance&quot;: &quot;0&quot;
  }
]'>Copy</button><pre><code>./bcc balance --accAddress=&quot;local[EShop]HMpSyt2Jk5BiFiR2j45nGGjToF9miUVaG&quot; --tokenName=&quot;LOC&quot; --chainid local[EShop]

返回结果如下表示操作成功:
OK
Response: [
  {
    &quot;tokenAddress&quot;: &quot;local[EShop]AJrbk6Wdf7TCbunrXXS5kKvbWVszhC1TA&quot;,
    &quot;tokenName&quot;: &quot;LOC&quot;,
    &quot;balance&quot;: &quot;0&quot;
  }
]
</code></pre>
</figure>
<p class='with-space'>然后我们开始从侧链 <code>SmartCity</code> 给侧链 EShop 转账：</p>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text='./bcc transfer --name scAccount --password Aa1@Cd3$ --token LOC --gasLimit 100000  --to local[EShop]HMpSyt2Jk5BiFiR2j45nGGjToF9miUVaG --value 10 --chainid local[SmartCity]

返回结果如下表示操作成功:
OK
Response: {
  &quot;code&quot;: 200,
  &quot;log&quot;: &quot;&quot;,
  &quot;fee&quot;: 10000000,
  &quot;txHash&quot;: &quot;0x25FEA54305EDE927A7FDC47AE28FE3B2D29A8FB54A85080CBD7C738A7B0FB7C8&quot;,
  &quot;height&quot;: 6559
}'>Copy</button><pre><code>./bcc transfer --name scAccount --password Aa1@Cd3$ --token LOC --gasLimit 100000  --to local[EShop]HMpSyt2Jk5BiFiR2j45nGGjToF9miUVaG --value 10 --chainid local[SmartCity]

返回结果如下表示操作成功:
OK
Response: {
  &quot;code&quot;: 200,
  &quot;log&quot;: &quot;&quot;,
  &quot;fee&quot;: 10000000,
  &quot;txHash&quot;: &quot;0x25FEA54305EDE927A7FDC47AE28FE3B2D29A8FB54A85080CBD7C738A7B0FB7C8&quot;,
  &quot;height&quot;: 6559
}
</code></pre>
</figure>
<p class='with-space'>在侧链 <code>EShop</code> 上再次查询 local[EShop]HMpSyt2Jk5BiFiR2j45nGGjToF9miUVaG 的账户余额：</p>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text='./bcc balance --accAddress=&quot;local[EShop]HMpSyt2Jk5BiFiR2j45nGGjToF9miUVaG&quot; --tokenName=&quot;LOC&quot; --chainid local[EShop]

返回结果如下表示操作成功:
OK
Response: [
  {
    &quot;tokenAddress&quot;: &quot;local[EShop]AJrbk6Wdf7TCbunrXXS5kKvbWVszhC1TA&quot;,
    &quot;tokenName&quot;: &quot;LOC&quot;,
    &quot;balance&quot;: &quot;10000000000&quot;
  }
]'>Copy</button><pre><code>./bcc balance --accAddress=&quot;local[EShop]HMpSyt2Jk5BiFiR2j45nGGjToF9miUVaG&quot; --tokenName=&quot;LOC&quot; --chainid local[EShop]

返回结果如下表示操作成功:
OK
Response: [
  {
    &quot;tokenAddress&quot;: &quot;local[EShop]AJrbk6Wdf7TCbunrXXS5kKvbWVszhC1TA&quot;,
    &quot;tokenName&quot;: &quot;LOC&quot;,
    &quot;balance&quot;: &quot;10000000000&quot;
  }
]
</code></pre>
</figure>
<p class='with-space'>确认跨链转账成功。如果查询账户余额未到账(可能是还未到账)，可以通过获取 <code>跨链事务Hash</code> 到目标链查询这笔跨链事务的状态(参考第二章 跨链事务)。如果该笔跨链事务状态显示已完成,但是再次查询余额依然未到账，可以根据第二章跨链事务查询交易失败原因。</p>
<h3 id='e5dfcda4'><span class='bd-content-title'>2.4 代币激活<a class='anchorjs-link ' href='#e5dfcda4' aria-label='Anchor' data-anchorjs-icon='#'></a></span></h3>
<p class='with-space'>如果我们想我们的侧链支持某种类型的标准代币，我们可以使用代币激活功能；如下我们以在侧链 <code>SmartCity</code> 上激活代币 TST 为例，展示侧链激活代币的操作：</p>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text='./bcc call --contract token-issue --method Activate --splitBy @ --params &quot;TST&quot;@&quot;SmartCity&quot; --gasLimit 100000 --orgName genesis --name scowner --password SCOwner@2019 --chainid local

返回结果如下表示操作成功:
OK
Response: {
  &quot;code&quot;: 200,
  &quot;log&quot;: &quot;&quot;,
  &quot;fee&quot;: 131000000,
  &quot;txHash&quot;: &quot;0x177CE19688464BCCC35F78288B28E1D0E766ACF302A7A3E994D86100F7D2CAAE&quot;,
  &quot;height&quot;: 47177
}'>Copy</button><pre><code>./bcc call --contract token-issue --method Activate --splitBy @ --params &quot;TST&quot;@&quot;SmartCity&quot; --gasLimit 100000 --orgName genesis --name scowner --password SCOwner@2019 --chainid local

返回结果如下表示操作成功:
OK
Response: {
  &quot;code&quot;: 200,
  &quot;log&quot;: &quot;&quot;,
  &quot;fee&quot;: 131000000,
  &quot;txHash&quot;: &quot;0x177CE19688464BCCC35F78288B28E1D0E766ACF302A7A3E994D86100F7D2CAAE&quot;,
  &quot;height&quot;: 47177
}
</code></pre>
</figure>
<p class='with-space'>我们可以到侧链上查询一下，是否生成了该代币对应的信息：</p>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text=' ./bcc query -k &quot;/token/name/TST&quot; --chainid local[SmartCity]

返回结果如下:
OK
Response: 
  Code: 200
  Key: /token/name/TST
  Value: &quot;local[SmartCity]8GPJL6ipTyYRNr5xTyGWWFayd2k1EoLYu&quot;'>Copy</button><pre><code> ./bcc query -k &quot;/token/name/TST&quot; --chainid local[SmartCity]

返回结果如下:
OK
Response: 
  Code: 200
  Key: /token/name/TST
  Value: &quot;local[SmartCity]8GPJL6ipTyYRNr5xTyGWWFayd2k1EoLYu&quot;
</code></pre>
</figure>
<p class='with-space'>由上可以得到该代币的地址，我们还可以用以下命令查该代币的信息：</p>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text='./bcc query -k &quot;/token/local[SmartCity]8GPJL6ipTyYRNr5xTyGWWFayd2k1EoLYu&quot; --chainid local[SmartCity]

返回结果如下:
OK
Response: 
  Code: 200
  Key: /token/local[SmartCity]8GPJL6ipTyYRNr5xTyGWWFayd2k1EoLYu
  Value: {&quot;address&quot;:&quot;local[SmartCity]8GPJL6ipTyYRNr5xTyGWWFayd2k1EoLYu&quot;,&quot;owner&quot;:&quot;local[SmartCity]ETK7Zh9hNSPrEKdmCgnHDtFPatcs9WwVL&quot;,&quot;name&quot;:&quot;TST&quot;,&quot;symbol&quot;:&quot;TST&quot;,&quot;totalSupply&quot;:0,&quot;addSupplyEnabled&quot;:false,&quot;burnEnabled&quot;:false,&quot;gasprice&quot;:2500}'>Copy</button><pre><code>./bcc query -k &quot;/token/local[SmartCity]8GPJL6ipTyYRNr5xTyGWWFayd2k1EoLYu&quot; --chainid local[SmartCity]

返回结果如下:
OK
Response: 
  Code: 200
  Key: /token/local[SmartCity]8GPJL6ipTyYRNr5xTyGWWFayd2k1EoLYu
  Value: {&quot;address&quot;:&quot;local[SmartCity]8GPJL6ipTyYRNr5xTyGWWFayd2k1EoLYu&quot;,&quot;owner&quot;:&quot;local[SmartCity]ETK7Zh9hNSPrEKdmCgnHDtFPatcs9WwVL&quot;,&quot;name&quot;:&quot;TST&quot;,&quot;symbol&quot;:&quot;TST&quot;,&quot;totalSupply&quot;:0,&quot;addSupplyEnabled&quot;:false,&quot;burnEnabled&quot;:false,&quot;gasprice&quot;:2500}
</code></pre>
</figure>
<p class='with-space'>至此,我们完成了代币 <code>Diamond Coin</code>的激活,我们可以用以下命令尝试该代币的转账:</p>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text='./bcc transfer --name owner --password Ab1@Cd3$ --token &quot;TST&quot; --gasLimit 100000  --to local[SmartCity]HMpSyt2Jk5BiFiR2j45nGGjToF9miUVaG --value 100 --chainid local

返回结果如下:
OK
Response: {
  &quot;code&quot;: 200,
  &quot;log&quot;: &quot;&quot;,
  &quot;fee&quot;: 5250000,
  &quot;txHash&quot;: &quot;0xE1B35FF40EFA83A972C2E1260E2677937025842BCA87B5C61F515CEA2B1BFB40&quot;,
  &quot;height&quot;: 48518
}'>Copy</button><pre><code>./bcc transfer --name owner --password Ab1@Cd3$ --token &quot;TST&quot; --gasLimit 100000  --to local[SmartCity]HMpSyt2Jk5BiFiR2j45nGGjToF9miUVaG --value 100 --chainid local

返回结果如下:
OK
Response: {
  &quot;code&quot;: 200,
  &quot;log&quot;: &quot;&quot;,
  &quot;fee&quot;: 5250000,
  &quot;txHash&quot;: &quot;0xE1B35FF40EFA83A972C2E1260E2677937025842BCA87B5C61F515CEA2B1BFB40&quot;,
  &quot;height&quot;: 48518
}
</code></pre>
</figure>
<p class='with-space'>通过上述命令我们完成了代币 <code>Diamond Coin</code>的跨链转账,我们试着查询一下该笔交易是否成功到账:</p>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text='./bcc balance --accAddress=&quot;local[SmartCity]HMpSyt2Jk5BiFiR2j45nGGjToF9miUVaG&quot; --tokenName=&quot;Diamond Coin&quot; --chainid local[SmartCity]

返回结果如下:
OK
Response: [
  {
    &quot;tokenAddress&quot;: &quot;local[SmartCity]8GPJL6ipTyYRNr5xTyGWWFayd2k1EoLYu&quot;,
    &quot;tokenName&quot;: &quot;TST&quot;,
    &quot;balance&quot;: &quot;100000000000&quot;
  }
]'>Copy</button><pre><code>./bcc balance --accAddress=&quot;local[SmartCity]HMpSyt2Jk5BiFiR2j45nGGjToF9miUVaG&quot; --tokenName=&quot;Diamond Coin&quot; --chainid local[SmartCity]

返回结果如下:
OK
Response: [
  {
    &quot;tokenAddress&quot;: &quot;local[SmartCity]8GPJL6ipTyYRNr5xTyGWWFayd2k1EoLYu&quot;,
    &quot;tokenName&quot;: &quot;TST&quot;,
    &quot;balance&quot;: &quot;100000000000&quot;
  }
]
</code></pre>
</figure>
<p class='with-space'>经查询,代币 <code>TST</code> 成功到账.如果查询账户余额未到账,可以通过查询跨链事务来了解这笔跨链转账的状态,详细参考第二章 跨链事务.</p>
<h2 id='e8ef0be5'><span class='bd-content-title'>3. 跨链事务<a class='anchorjs-link ' href='#e8ef0be5' aria-label='Anchor' data-anchorjs-icon='#'></a></span></h2>
<h3 id='be99796a'><span class='bd-content-title'>3.1 跨链事务Hash获取<a class='anchorjs-link ' href='#be99796a' aria-label='Anchor' data-anchorjs-icon='#'></a></span></h3>
<p class='with-space'>跨链事务 Hash 即 <code>ibcHash</code> ,我们可以通过它获取跨链事务状态以及跨链事务信息.</p>
<p class='with-space'>我们以 2.1 中主链给侧链 <code>SmartCity</code> 转账为例子,我们得到转账高度为 25974,我们可以通过以下命令获取 ibcHash :</p>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text='./bcc block -t 25974
OK
Response: {
  &quot;blockHeight&quot;: 25974,
  &quot;blockHash&quot;: &quot;0xf8f381cd2c5bae781aebd8524edad20af4654158&quot;,
  &quot;parentHash&quot;: &quot;0xf838ca7c49b12e8cd3839fe7ce3d0f8d2ee72bd8&quot;,
  &quot;chainID&quot;: &quot;local&quot;,
  &quot;validatorHash&quot;: &quot;0xf2c0a2f00f78c4b8cef2c7e56dd62e191ab7d0b7&quot;,
  &quot;consensusHash&quot;: &quot;0xf66ef1df8ba6dac7a1ecce40cc84e54a1cebc6a5&quot;,
  &quot;blockTime&quot;: &quot;2019-11-28 07:27:33.528200078 +0000 UTC&quot;,
  &quot;blockSize&quot;: 1039,
  &quot;proposerAddress&quot;: &quot;localMp5Xi3o2rnXjzbCuzo5R4m6qv7fbfNgkW&quot;,
  &quot;txs&quot;: [
    {
      &quot;txHash&quot;: &quot;0x6c8c4a3324c87ece2ec85f03d25d3994ab5be31183aed6f7d8044ca2ccc0f25f&quot;,
      &quot;txTime&quot;: &quot;2019-11-28 07:27:33.528200078 +0000 UTC&quot;,
      &quot;code&quot;: 200,
      &quot;log&quot;: &quot;&quot;,
      &quot;blockHash&quot;: &quot;0xf8f381cd2c5bae781aebd8524edad20af4654158&quot;,
      &quot;blockHeight&quot;: 25974,
      &quot;from&quot;: &quot;localETK7Zh9hNSPrEKdmCgnHDtFPatcs9WwVL&quot;,
      &quot;nonce&quot;: 61,
      &quot;gasLimit&quot;: 100000,
      &quot;fee&quot;: 5000000,
      &quot;note&quot;: &quot;&quot;,
      &quot;messages&quot;: [
        ......
      ],
      &quot;tags&quot;: {
        ......,
        &quot;/0/4/ibc::packet/local-&gt;local[SmartCity]&quot;: {
          &quot;Name&quot;: &quot;ibc::packet/local-&gt;local[SmartCity]&quot;,
          &quot;ContractAddr&quot;: &quot;&quot;,
          &quot;ReceiptBytes&quot;: &quot;eyJmcm9tQ2hhaW5JRCI6ImxvY2FsIiwidG9DaGFpbklEIjoibG9jYWxbeXldIiwicXVldWVJRCI6ImxvY2FsLT5sb2NhbFt5eV0iLCJzZXEiOjUsIm9yZ0lEIjoib3JnSmdhR0NvblV5SzgxemlibnRVQmpRMzNQS2N0cGsxSzFHIiwiY29udHJhY3ROYW1lIjoidG9rZW4tYmFzaWMiLCJpYmNIYXNoIjoiMUJBMTNCOTU1OUVGQzlBMkI2RTBGRDU4OUVENThBNUREODI5QkFEOTY5MDk4NkYzMzE5RDYwRUE3MENGMTM5NyIsInR5cGUiOiJ0Y2N0eCIsInN0YXRlIjp7InN0YXR1cyI6Ik5vQWNrV2FudGVkIiwidGFnIjoiUmVjYXN0UGVuZGluZyIsImxvZyI6IiJ9LCJyZWNlaXB0cyI6W3sia2V5IjoiTHpBdmMzUmtPanAwY21GdWMyWmxjZz09IiwidmFsdWUiOiJleUp1WVcxbElqb2ljM1JrT2pwMGNtRnVjMlpsY2lJc0ltTnZiblJ5WVdOMFFXUmtjbVZ6Y3lJNklteHZZMkZzU0V4RWFIRjViMG94ZGxKMWJ6aHlaVGxIZUVaQlJsVXlRbXR6ZHpKclRuVndJaXdpY21WalpXbHdkRUo1ZEdWeklqb2laWGxLTUdJeWRHeGlhVWsyU1cxNGRsa3lSbk5SVlhCNVdXMXpNbFl5VW0xT01WSkVXVzVXZFdOc2FGbFZlbFp5VXpOYWFWWXhXbnBsYldoRVRWWlNRa2xwZDJsYWJrcDJZbE5KTmtsdGVIWlpNa1p6VWxaU1RFNHhjRzlQVjJoUFZURkNlVkpWZEd0aVZVNXVZbXRvUldSRldsRlpXRkpxWTNwc1dHUXhXazFKYVhkcFpFYzRhVTlwU25OaU1rNW9Za1JOZWsxclNubFBSWFJNWTFSV2JrNUVaR2hoTTA1aFpHMHhNVkV3VGpOT2Frb3hZakJOZWxOR1RtbE9hVWx6U1c1YWFHSklWbXhKYW05NFRVUkJkMDFFUVhkTlJFRjNUVVJCYzBsdE5YWmtSMVZwVDJsS2MySXlUbkpQYVVvNUlpd2ljbVZqWldsd2RFaGhjMmdpT2lJeVFUSkdNREpCTXpVNE56UkJNRGN5UVVZNFJqQTVNakpFTlRjNE5qUTVSVFJCT0VSRFFqa3pRalEwUlVVNE9EUkdOMFU1T1VSQ01qUTFPREV6TVRNNEluMD0ifSx7ImtleSI6Ikx6RXZkRzlyWlc1aVlYTnBZeTVCYzNObGRFTm9ZVzVuWlE9PSIsInZhbHVlIjoiZXlKdVlXMWxJam9pZEc5clpXNWlZWE5wWXk1QmMzTmxkRU5vWVc1blpTSXNJbU52Ym5SeVlXTjBRV1JrY21WemN5STZJbXh2WTJGc1NFeEVhSEY1YjBveGRsSjFiemh5WlRsSGVFWkJSbFV5UW10emR6SnJUblZ3SWl3aWNtVmpaV2x3ZEVKNWRHVnpJam9pWlhsS01scFlTbnBoVnpsMVNXcHZhVTFwTkhoSmFYZHBaRWhzZDFwVFNUWkpiWGgyV1RKemFVeERTakJpTW5Sc1ltbEpOa2x0ZUhaWk1rWnpVVlZ3ZVZsdGN6SldNbEp0VGpGU1JGbHVWblZqYkdoWlZYcFdjbE16V21sV01WcDZaVzFvUkUxV1VrSkphWGRwV201S2RtSlRTVFpKYlhoMldUSkdjMUpXVWt4T01YQnZUMWRvVDFVeFFubFNWWFJyWWxWT2JtSnJhRVZrUlZwUldWaFNhbU42YkZoa01WcE5TV2wzYVdSSE9HbFBhVXB6WWpKT2FHSkdkRFZsVmpGSlZGaENWR1ZZVVhsVGJYTXhVVzFzUjJGV1NYbGhhbEV4WW10a1NHRnNVblpTYW14MFlWWldWMWxWWTJsTVEwb3lXVmQ0TVZwVFNUWk5WRUYzVFVSQmQwMUVRWGROUkVGM1RFTktjRmx0VGtsWldFNXZTV3B2YVUxVlNrSk5WRTVEVDFSVk1VOVZWa2RSZW14Q1RXdEpNbEpVUWtkU1JGVTBUMVZXUlU1VWFFSk9WVkpGVDBSSk5WRnJSa1ZQVkZrMVRVUnJORTVyV1hwTmVrVTFVa1JaZDFKVlJUTk5SVTVIVFZSTk5VNTVTWE5KYlU1dldWYzFibHBWYkRCYVZ6RjZTV3B3WW1WNVNrUmhSMFp3WW10c1JVbHFiMmxpUnpscVdWZDNhVXhEU2tKYVIxSjVXbGhPZWtscWIybGlSemxxV1ZkM2VrMTZTa05qYW1oTVV6TkZNVnA2VVROWlYzUjZWMjVhZEdSVlRrUmtlbGw1WkZjNVJFMHdhRlJaYWxscFRFTktVVnBYVm5sUk1taG9ZVmMxU2xKRFNUWkpiWGgyV1RKR2MxY3piRFZZVTBselNXeENiRnBZU2tSaFIwWndZbXRLYUdKSFJuVlpNbFZwVDJwSmQwMUVRWGROUkVGM1RVUkJkMlpXTVRraUxDSnlaV05sYVhCMFNHRnphQ0k2SWtWR09UazRRalZDUmpSQ1JEUTNPVEl4UXpnMVF6QXhORU5FTlVNNE56UXlOelUzT0VNeE9FUXpNMEUzTlVRNVFqazRSa1kwTmtaQk5qWTBSVVpETjBNaWZRPT0ifV19&quot;,
          &quot;ReceiptHash&quot;: &quot;0x075860DF0B94E3A2D346150DD1E17F99D4B171F1B689A87C39CA0977AFBA8D40&quot;,
          &quot;Receipt&quot;: {
            &quot;contractName&quot;: &quot;token-basic&quot;,
            &quot;fromChainID&quot;: &quot;local&quot;,
            &quot;ibcHash&quot;: &quot;1BA13B9559EFC9A2B6E0FD589ED58A5DD829BAD9690986F3319D60EA70CF1397&quot;,
            &quot;orgID&quot;: &quot;orgJgaGConUyK81zibntUBjQ33PKctpk1K1G&quot;,
            &quot;queueID&quot;: &quot;local-&gt;local[SmartCity]&quot;,
            &quot;receipts&quot;: [
              {
                &quot;key&quot;: &quot;LzAvc3RkOjp0cmFuc2Zlcg==&quot;,
                &quot;value&quot;: &quot;eyJuYW1lIjoic3RkOjp0cmFuc2ZlciIsImNvbnRyYWN0QWRkcmVzcyI6ImxvY2FsSExEaHF5b0oxdlJ1bzhyZTlHeEZBRlUyQmtzdzJrTnVwIiwicmVjZWlwdEJ5dGVzIjoiZXlKMGIydGxiaUk2SW14dlkyRnNRVXB5WW1zMlYyUm1OMVJEWW5WdWNsaFlVelZyUzNaaVYxWnplbWhETVZSQklpd2labkp2YlNJNklteHZZMkZzUlZSTE4xcG9PV2hPVTFCeVJVdGtiVU5uYmtoRWRFWlFZWFJqY3psWGQxWk1JaXdpZEc4aU9pSnNiMk5oYkRNek1rSnlPRXRMY1RWbk5EZGhhM05hZG0xMVEwTjNOakoxYjBNelNGTmlOaUlzSW5aaGJIVmxJam94TURBd01EQXdNREF3TURBc0ltNXZkR1VpT2lKc2IyTnJPaUo5IiwicmVjZWlwdEhhc2giOiIyQTJGMDJBMzU4NzRBMDcyQUY4RjA5MjJENTc4NjQ5RTRBOERDQjkzQjQ0RUU4ODRGN0U5OURCMjQ1ODEzMTM4In0=&quot;
              },
              {
                &quot;key&quot;: &quot;LzEvdG9rZW5iYXNpYy5Bc3NldENoYW5nZQ==&quot;,
                &quot;value&quot;: &quot;eyJuYW1lIjoidG9rZW5iYXNpYy5Bc3NldENoYW5nZSIsImNvbnRyYWN0QWRkcmVzcyI6ImxvY2FsSExEaHF5b0oxdlJ1bzhyZTlHeEZBRlUyQmtzdzJrTnVwIiwicmVjZWlwdEJ5dGVzIjoiZXlKMlpYSnphVzl1SWpvaU1pNHhJaXdpZEhsd1pTSTZJbXh2WTJzaUxDSjBiMnRsYmlJNklteHZZMkZzUVVweVltczJWMlJtTjFSRFluVnVjbGhZVXpWclMzWmlWMVp6ZW1oRE1WUkJJaXdpWm5KdmJTSTZJbXh2WTJGc1JWUkxOMXBvT1doT1UxQnlSVXRrYlVObmJraEVkRVpRWVhSamN6bFhkMVpNSWl3aWRHOGlPaUpzYjJOaGJGdDVlVjFJVFhCVGVYUXlTbXMxUW1sR2FWSXlhalExYmtkSGFsUnZSamx0YVZWV1lVY2lMQ0oyWVd4MVpTSTZNVEF3TURBd01EQXdNREF3TENKcFltTklZWE5vSWpvaU1VSkJNVE5DT1RVMU9VVkdRemxCTWtJMlJUQkdSRFU0T1VWRU5UaEJOVVJFT0RJNVFrRkVPVFk1TURrNE5rWXpNekU1UkRZd1JVRTNNRU5HTVRNNU55SXNJbU5vWVc1blpVbDBaVzF6SWpwYmV5SkRhR0ZwYmtsRUlqb2liRzlqWVd3aUxDSkJaR1J5WlhOeklqb2liRzlqWVd3ek16SkNjamhMUzNFMVp6UTNZV3R6V25adGRVTkRkell5ZFc5RE0waFRZallpTENKUVpXVnlRMmhoYVc1SlJDSTZJbXh2WTJGc1czbDVYU0lzSWxCbFpYSkRhR0ZwYmtKaGJHRnVZMlVpT2pJd01EQXdNREF3TURBd2ZWMTkiLCJyZWNlaXB0SGFzaCI6IkVGOTk4QjVCRjRCRDQ3OTIxQzg1QzAxNENENUM4NzQyNzU3OEMxOEQzM0E3NUQ5Qjk4RkY0NkZBNjY0RUZDN0MifQ==&quot;
              }
            ],
            &quot;seq&quot;: 5,
            &quot;state&quot;: {
              &quot;log&quot;: &quot;&quot;,
              &quot;status&quot;: &quot;NoAckWanted&quot;,
              &quot;tag&quot;: &quot;RecastPending&quot;
            },
            &quot;toChainID&quot;: &quot;local[SmartCity]&quot;,
            &quot;type&quot;: &quot;tcctx&quot;
          }
        },
        ......
                 }
    }
  ]
}'>Copy</button><pre><code>./bcc block -t 25974
OK
Response: {
  &quot;blockHeight&quot;: 25974,
  &quot;blockHash&quot;: &quot;0xf8f381cd2c5bae781aebd8524edad20af4654158&quot;,
  &quot;parentHash&quot;: &quot;0xf838ca7c49b12e8cd3839fe7ce3d0f8d2ee72bd8&quot;,
  &quot;chainID&quot;: &quot;local&quot;,
  &quot;validatorHash&quot;: &quot;0xf2c0a2f00f78c4b8cef2c7e56dd62e191ab7d0b7&quot;,
  &quot;consensusHash&quot;: &quot;0xf66ef1df8ba6dac7a1ecce40cc84e54a1cebc6a5&quot;,
  &quot;blockTime&quot;: &quot;2019-11-28 07:27:33.528200078 +0000 UTC&quot;,
  &quot;blockSize&quot;: 1039,
  &quot;proposerAddress&quot;: &quot;localMp5Xi3o2rnXjzbCuzo5R4m6qv7fbfNgkW&quot;,
  &quot;txs&quot;: [
    {
      &quot;txHash&quot;: &quot;0x6c8c4a3324c87ece2ec85f03d25d3994ab5be31183aed6f7d8044ca2ccc0f25f&quot;,
      &quot;txTime&quot;: &quot;2019-11-28 07:27:33.528200078 +0000 UTC&quot;,
      &quot;code&quot;: 200,
      &quot;log&quot;: &quot;&quot;,
      &quot;blockHash&quot;: &quot;0xf8f381cd2c5bae781aebd8524edad20af4654158&quot;,
      &quot;blockHeight&quot;: 25974,
      &quot;from&quot;: &quot;localETK7Zh9hNSPrEKdmCgnHDtFPatcs9WwVL&quot;,
      &quot;nonce&quot;: 61,
      &quot;gasLimit&quot;: 100000,
      &quot;fee&quot;: 5000000,
      &quot;note&quot;: &quot;&quot;,
      &quot;messages&quot;: [
        ......
      ],
      &quot;tags&quot;: {
        ......,
        &quot;/0/4/ibc::packet/local-&gt;local[SmartCity]&quot;: {
          &quot;Name&quot;: &quot;ibc::packet/local-&gt;local[SmartCity]&quot;,
          &quot;ContractAddr&quot;: &quot;&quot;,
          &quot;ReceiptBytes&quot;: &quot;eyJmcm9tQ2hhaW5JRCI6ImxvY2FsIiwidG9DaGFpbklEIjoibG9jYWxbeXldIiwicXVldWVJRCI6ImxvY2FsLT5sb2NhbFt5eV0iLCJzZXEiOjUsIm9yZ0lEIjoib3JnSmdhR0NvblV5SzgxemlibnRVQmpRMzNQS2N0cGsxSzFHIiwiY29udHJhY3ROYW1lIjoidG9rZW4tYmFzaWMiLCJpYmNIYXNoIjoiMUJBMTNCOTU1OUVGQzlBMkI2RTBGRDU4OUVENThBNUREODI5QkFEOTY5MDk4NkYzMzE5RDYwRUE3MENGMTM5NyIsInR5cGUiOiJ0Y2N0eCIsInN0YXRlIjp7InN0YXR1cyI6Ik5vQWNrV2FudGVkIiwidGFnIjoiUmVjYXN0UGVuZGluZyIsImxvZyI6IiJ9LCJyZWNlaXB0cyI6W3sia2V5IjoiTHpBdmMzUmtPanAwY21GdWMyWmxjZz09IiwidmFsdWUiOiJleUp1WVcxbElqb2ljM1JrT2pwMGNtRnVjMlpsY2lJc0ltTnZiblJ5WVdOMFFXUmtjbVZ6Y3lJNklteHZZMkZzU0V4RWFIRjViMG94ZGxKMWJ6aHlaVGxIZUVaQlJsVXlRbXR6ZHpKclRuVndJaXdpY21WalpXbHdkRUo1ZEdWeklqb2laWGxLTUdJeWRHeGlhVWsyU1cxNGRsa3lSbk5SVlhCNVdXMXpNbFl5VW0xT01WSkVXVzVXZFdOc2FGbFZlbFp5VXpOYWFWWXhXbnBsYldoRVRWWlNRa2xwZDJsYWJrcDJZbE5KTmtsdGVIWlpNa1p6VWxaU1RFNHhjRzlQVjJoUFZURkNlVkpWZEd0aVZVNXVZbXRvUldSRldsRlpXRkpxWTNwc1dHUXhXazFKYVhkcFpFYzRhVTlwU25OaU1rNW9Za1JOZWsxclNubFBSWFJNWTFSV2JrNUVaR2hoTTA1aFpHMHhNVkV3VGpOT2Frb3hZakJOZWxOR1RtbE9hVWx6U1c1YWFHSklWbXhKYW05NFRVUkJkMDFFUVhkTlJFRjNUVVJCYzBsdE5YWmtSMVZwVDJsS2MySXlUbkpQYVVvNUlpd2ljbVZqWldsd2RFaGhjMmdpT2lJeVFUSkdNREpCTXpVNE56UkJNRGN5UVVZNFJqQTVNakpFTlRjNE5qUTVSVFJCT0VSRFFqa3pRalEwUlVVNE9EUkdOMFU1T1VSQ01qUTFPREV6TVRNNEluMD0ifSx7ImtleSI6Ikx6RXZkRzlyWlc1aVlYTnBZeTVCYzNObGRFTm9ZVzVuWlE9PSIsInZhbHVlIjoiZXlKdVlXMWxJam9pZEc5clpXNWlZWE5wWXk1QmMzTmxkRU5vWVc1blpTSXNJbU52Ym5SeVlXTjBRV1JrY21WemN5STZJbXh2WTJGc1NFeEVhSEY1YjBveGRsSjFiemh5WlRsSGVFWkJSbFV5UW10emR6SnJUblZ3SWl3aWNtVmpaV2x3ZEVKNWRHVnpJam9pWlhsS01scFlTbnBoVnpsMVNXcHZhVTFwTkhoSmFYZHBaRWhzZDFwVFNUWkpiWGgyV1RKemFVeERTakJpTW5Sc1ltbEpOa2x0ZUhaWk1rWnpVVlZ3ZVZsdGN6SldNbEp0VGpGU1JGbHVWblZqYkdoWlZYcFdjbE16V21sV01WcDZaVzFvUkUxV1VrSkphWGRwV201S2RtSlRTVFpKYlhoMldUSkdjMUpXVWt4T01YQnZUMWRvVDFVeFFubFNWWFJyWWxWT2JtSnJhRVZrUlZwUldWaFNhbU42YkZoa01WcE5TV2wzYVdSSE9HbFBhVXB6WWpKT2FHSkdkRFZsVmpGSlZGaENWR1ZZVVhsVGJYTXhVVzFzUjJGV1NYbGhhbEV4WW10a1NHRnNVblpTYW14MFlWWldWMWxWWTJsTVEwb3lXVmQ0TVZwVFNUWk5WRUYzVFVSQmQwMUVRWGROUkVGM1RFTktjRmx0VGtsWldFNXZTV3B2YVUxVlNrSk5WRTVEVDFSVk1VOVZWa2RSZW14Q1RXdEpNbEpVUWtkU1JGVTBUMVZXUlU1VWFFSk9WVkpGVDBSSk5WRnJSa1ZQVkZrMVRVUnJORTVyV1hwTmVrVTFVa1JaZDFKVlJUTk5SVTVIVFZSTk5VNTVTWE5KYlU1dldWYzFibHBWYkRCYVZ6RjZTV3B3WW1WNVNrUmhSMFp3WW10c1JVbHFiMmxpUnpscVdWZDNhVXhEU2tKYVIxSjVXbGhPZWtscWIybGlSemxxV1ZkM2VrMTZTa05qYW1oTVV6TkZNVnA2VVROWlYzUjZWMjVhZEdSVlRrUmtlbGw1WkZjNVJFMHdhRlJaYWxscFRFTktVVnBYVm5sUk1taG9ZVmMxU2xKRFNUWkpiWGgyV1RKR2MxY3piRFZZVTBselNXeENiRnBZU2tSaFIwWndZbXRLYUdKSFJuVlpNbFZwVDJwSmQwMUVRWGROUkVGM1RVUkJkMlpXTVRraUxDSnlaV05sYVhCMFNHRnphQ0k2SWtWR09UazRRalZDUmpSQ1JEUTNPVEl4UXpnMVF6QXhORU5FTlVNNE56UXlOelUzT0VNeE9FUXpNMEUzTlVRNVFqazRSa1kwTmtaQk5qWTBSVVpETjBNaWZRPT0ifV19&quot;,
          &quot;ReceiptHash&quot;: &quot;0x075860DF0B94E3A2D346150DD1E17F99D4B171F1B689A87C39CA0977AFBA8D40&quot;,
          &quot;Receipt&quot;: {
            &quot;contractName&quot;: &quot;token-basic&quot;,
            &quot;fromChainID&quot;: &quot;local&quot;,
            &quot;ibcHash&quot;: &quot;1BA13B9559EFC9A2B6E0FD589ED58A5DD829BAD9690986F3319D60EA70CF1397&quot;,
            &quot;orgID&quot;: &quot;orgJgaGConUyK81zibntUBjQ33PKctpk1K1G&quot;,
            &quot;queueID&quot;: &quot;local-&gt;local[SmartCity]&quot;,
            &quot;receipts&quot;: [
              {
                &quot;key&quot;: &quot;LzAvc3RkOjp0cmFuc2Zlcg==&quot;,
                &quot;value&quot;: &quot;eyJuYW1lIjoic3RkOjp0cmFuc2ZlciIsImNvbnRyYWN0QWRkcmVzcyI6ImxvY2FsSExEaHF5b0oxdlJ1bzhyZTlHeEZBRlUyQmtzdzJrTnVwIiwicmVjZWlwdEJ5dGVzIjoiZXlKMGIydGxiaUk2SW14dlkyRnNRVXB5WW1zMlYyUm1OMVJEWW5WdWNsaFlVelZyUzNaaVYxWnplbWhETVZSQklpd2labkp2YlNJNklteHZZMkZzUlZSTE4xcG9PV2hPVTFCeVJVdGtiVU5uYmtoRWRFWlFZWFJqY3psWGQxWk1JaXdpZEc4aU9pSnNiMk5oYkRNek1rSnlPRXRMY1RWbk5EZGhhM05hZG0xMVEwTjNOakoxYjBNelNGTmlOaUlzSW5aaGJIVmxJam94TURBd01EQXdNREF3TURBc0ltNXZkR1VpT2lKc2IyTnJPaUo5IiwicmVjZWlwdEhhc2giOiIyQTJGMDJBMzU4NzRBMDcyQUY4RjA5MjJENTc4NjQ5RTRBOERDQjkzQjQ0RUU4ODRGN0U5OURCMjQ1ODEzMTM4In0=&quot;
              },
              {
                &quot;key&quot;: &quot;LzEvdG9rZW5iYXNpYy5Bc3NldENoYW5nZQ==&quot;,
                &quot;value&quot;: &quot;eyJuYW1lIjoidG9rZW5iYXNpYy5Bc3NldENoYW5nZSIsImNvbnRyYWN0QWRkcmVzcyI6ImxvY2FsSExEaHF5b0oxdlJ1bzhyZTlHeEZBRlUyQmtzdzJrTnVwIiwicmVjZWlwdEJ5dGVzIjoiZXlKMlpYSnphVzl1SWpvaU1pNHhJaXdpZEhsd1pTSTZJbXh2WTJzaUxDSjBiMnRsYmlJNklteHZZMkZzUVVweVltczJWMlJtTjFSRFluVnVjbGhZVXpWclMzWmlWMVp6ZW1oRE1WUkJJaXdpWm5KdmJTSTZJbXh2WTJGc1JWUkxOMXBvT1doT1UxQnlSVXRrYlVObmJraEVkRVpRWVhSamN6bFhkMVpNSWl3aWRHOGlPaUpzYjJOaGJGdDVlVjFJVFhCVGVYUXlTbXMxUW1sR2FWSXlhalExYmtkSGFsUnZSamx0YVZWV1lVY2lMQ0oyWVd4MVpTSTZNVEF3TURBd01EQXdNREF3TENKcFltTklZWE5vSWpvaU1VSkJNVE5DT1RVMU9VVkdRemxCTWtJMlJUQkdSRFU0T1VWRU5UaEJOVVJFT0RJNVFrRkVPVFk1TURrNE5rWXpNekU1UkRZd1JVRTNNRU5HTVRNNU55SXNJbU5vWVc1blpVbDBaVzF6SWpwYmV5SkRhR0ZwYmtsRUlqb2liRzlqWVd3aUxDSkJaR1J5WlhOeklqb2liRzlqWVd3ek16SkNjamhMUzNFMVp6UTNZV3R6V25adGRVTkRkell5ZFc5RE0waFRZallpTENKUVpXVnlRMmhoYVc1SlJDSTZJbXh2WTJGc1czbDVYU0lzSWxCbFpYSkRhR0ZwYmtKaGJHRnVZMlVpT2pJd01EQXdNREF3TURBd2ZWMTkiLCJyZWNlaXB0SGFzaCI6IkVGOTk4QjVCRjRCRDQ3OTIxQzg1QzAxNENENUM4NzQyNzU3OEMxOEQzM0E3NUQ5Qjk4RkY0NkZBNjY0RUZDN0MifQ==&quot;
              }
            ],
            &quot;seq&quot;: 5,
            &quot;state&quot;: {
              &quot;log&quot;: &quot;&quot;,
              &quot;status&quot;: &quot;NoAckWanted&quot;,
              &quot;tag&quot;: &quot;RecastPending&quot;
            },
            &quot;toChainID&quot;: &quot;local[SmartCity]&quot;,
            &quot;type&quot;: &quot;tcctx&quot;
          }
        },
        ......
                 }
    }
  ]
}
</code></pre>
</figure>
<p class='with-space'>找到收据名称包含 <code>ibc::packet</code> 的收据,在 Receipt 结构中得到 <code>ibcHash</code> .</p>
<h3 id='c2f8b366'><span class='bd-content-title'>3.2 跨链事务数据<a class='anchorjs-link ' href='#c2f8b366' aria-label='Anchor' data-anchorjs-icon='#'></a></span></h3>
<p class='with-space'>通过上面查询到的 <code>ibcHash</code> : 1BA13B9559EFC9A2B6E0FD589ED58A5DD829BAD9690986F3319D60EA70CF1397 ,我们可以用以下命令得到跨链事务数据:</p>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text='./bcc query -k /ibc/1BA13B9559EFC9A2B6E0FD589ED58A5DD829BAD9690986F3319D60EA70CF1397/packets

返回结果如下:
OK
Response: 
  Code: 200
  Key: /ibc/1BA13B9559EFC9A2B6E0FD589ED58A5DD829BAD9690986F3319D60EA70CF1397/packets
 Value: [
 ......,{
    &quot;fromChainID&quot;: &quot;local&quot;,
    &quot;toChainID&quot;: &quot;local[SmartCity]&quot;,
    &quot;queueID&quot;: &quot;&quot;,
    &quot;seq&quot;: 0,
    &quot;orgID&quot;: &quot;orgJgaGConUyK81zibntUBjQ33PKctpk1K1G&quot;,
    &quot;contractName&quot;: &quot;token-basic&quot;,
    &quot;ibcHash&quot;: &quot;1BA13B9559EFC9A2B6E0FD589ED58A5DD829BAD9690986F3319D60EA70CF1397&quot;,
    &quot;type&quot;: &quot;tcctx&quot;,
    &quot;state&quot;: {
        &quot;status&quot;: &quot;NoAck&quot;,
        &quot;tag&quot;: &quot;Confirmed&quot;,
        &quot;log&quot;: &quot;&quot;
    },
    &quot;receipts&quot;: [{
        &quot;key&quot;: &quot;LzAvc3RkOjp0cmFuc2Zlcg==&quot;,
        &quot;value&quot;: &quot;eyJuYW1lIjoic3RkOjp0cmFuc2ZlciIsImNvbnRyYWN0QWRkcmVzcyI6ImxvY2FsSExEaHF5b0oxdlJ1bzhyZTlHeEZBRlUyQmtzdzJrTnVwIiwicmVjZWlwdEJ5dGVzIjoiZXlKMGIydGxiaUk2SW14dlkyRnNRVXB5WW1zMlYyUm1OMVJEWW5WdWNsaFlVelZyUzNaaVYxWnplbWhETVZSQklpd2labkp2YlNJNklteHZZMkZzUlZSTE4xcG9PV2hPVTFCeVJVdGtiVU5uYmtoRWRFWlFZWFJqY3psWGQxWk1JaXdpZEc4aU9pSnNiMk5oYkRNek1rSnlPRXRMY1RWbk5EZGhhM05hZG0xMVEwTjNOakoxYjBNelNGTmlOaUlzSW5aaGJIVmxJam94TURBd01EQXdNREF3TURBc0ltNXZkR1VpT2lKc2IyTnJPaUo5IiwicmVjZWlwdEhhc2giOiIyQTJGMDJBMzU4NzRBMDcyQUY4RjA5MjJENTc4NjQ5RTRBOERDQjkzQjQ0RUU4ODRGN0U5OURCMjQ1ODEzMTM4In0=&quot;
    }, {
        &quot;key&quot;: &quot;LzEvdG9rZW5iYXNpYy5Bc3NldENoYW5nZQ==&quot;,
        &quot;value&quot;: &quot;eyJuYW1lIjoidG9rZW5iYXNpYy5Bc3NldENoYW5nZSIsImNvbnRyYWN0QWRkcmVzcyI6ImxvY2FsSExEaHF5b0oxdlJ1bzhyZTlHeEZBRlUyQmtzdzJrTnVwIiwicmVjZWlwdEJ5dGVzIjoiZXlKMlpYSnphVzl1SWpvaU1pNHhJaXdpZEhsd1pTSTZJbXh2WTJzaUxDSjBiMnRsYmlJNklteHZZMkZzUVVweVltczJWMlJtTjFSRFluVnVjbGhZVXpWclMzWmlWMVp6ZW1oRE1WUkJJaXdpWm5KdmJTSTZJbXh2WTJGc1JWUkxOMXBvT1doT1UxQnlSVXRrYlVObmJraEVkRVpRWVhSamN6bFhkMVpNSWl3aWRHOGlPaUpzYjJOaGJGdDVlVjFJVFhCVGVYUXlTbXMxUW1sR2FWSXlhalExYmtkSGFsUnZSamx0YVZWV1lVY2lMQ0oyWVd4MVpTSTZNVEF3TURBd01EQXdNREF3TENKcFltTklZWE5vSWpvaU1VSkJNVE5DT1RVMU9VVkdRemxCTWtJMlJUQkdSRFU0T1VWRU5UaEJOVVJFT0RJNVFrRkVPVFk1TURrNE5rWXpNekU1UkRZd1JVRTNNRU5HTVRNNU55SXNJbU5vWVc1blpVbDBaVzF6SWpwYmV5SkRhR0ZwYmtsRUlqb2liRzlqWVd3aUxDSkJaR1J5WlhOeklqb2liRzlqWVd3ek16SkNjamhMUzNFMVp6UTNZV3R6V25adGRVTkRkell5ZFc5RE0waFRZallpTENKUVpXVnlRMmhoYVc1SlJDSTZJbXh2WTJGc1czbDVYU0lzSWxCbFpYSkRhR0ZwYmtKaGJHRnVZMlVpT2pJd01EQXdNREF3TURBd2ZWMTkiLCJyZWNlaXB0SGFzaCI6IkVGOTk4QjVCRjRCRDQ3OTIxQzg1QzAxNENENUM4NzQyNzU3OEMxOEQzM0E3NUQ5Qjk4RkY0NkZBNjY0RUZDN0MifQ==&quot;
    }, {
        &quot;key&quot;: &quot;LzEvc3RkOjp0cmFuc2Zlcg==&quot;,
        &quot;value&quot;: &quot;eyJuYW1lIjoic3RkOjp0cmFuc2ZlciIsImNvbnRyYWN0QWRkcmVzcyI6ImxvY2FsW3l5XUFKcmJrNldkZjdUQ2J1bnJYWFM1a0t2YldWc3poQzFUQSIsInJlY2VpcHRCeXRlcyI6ImV5SjBiMnRsYmlJNklteHZZMkZzVzNsNVhVRktjbUpyTmxka1pqZFVRMkoxYm5KWVdGTTFhMHQyWWxkV2MzcG9RekZVUVNJc0ltWnliMjBpT2lKc2IyTmhiRnQ1ZVYwek16SkNjamhMUzNFMVp6UTNZV3R6V25adGRVTkRkell5ZFc5RE0waFRZallpTENKMGJ5STZJbXh2WTJGc1czbDVYVWhOY0ZONWRESkthelZDYVVacFVqSnFORFZ1UjBkcVZHOUdPVzFwVlZaaFJ5SXNJblpoYkhWbElqb3hNREF3TURBd01EQXdNREI5IiwicmVjZWlwdEhhc2giOiIzMDJENDc0OTFCNDIyNDQzQUFBODFCRkFBQjA4MzQwOTJCMDY4OTYwOEFCQjUyMzhERTM5RjI2NzlGNjQ4Q0QyIn0=&quot;
    }, {
        &quot;key&quot;: &quot;LzIvdG9rZW5iYXNpYy5Bc3NldENoYW5nZQ==&quot;,
        &quot;value&quot;: &quot;eyJuYW1lIjoidG9rZW5iYXNpYy5Bc3NldENoYW5nZSIsImNvbnRyYWN0QWRkcmVzcyI6ImxvY2FsW3l5XUFKcmJrNldkZjdUQ2J1bnJYWFM1a0t2YldWc3poQzFUQSIsInJlY2VpcHRCeXRlcyI6ImV5SjJaWEp6YVc5dUlqb2lNaTR4SWl3aWRIbHdaU0k2SW5KbFkyRnpkQ0lzSW5SdmEyVnVJam9pYkc5allXeGJlWGxkUVVweVltczJWMlJtTjFSRFluVnVjbGhZVXpWclMzWmlWMVp6ZW1oRE1WUkJJaXdpWm5KdmJTSTZJbXh2WTJGc1JWUkxOMXBvT1doT1UxQnlSVXRrYlVObmJraEVkRVpRWVhSamN6bFhkMVpNSWl3aWRHOGlPaUpzYjJOaGJGdDVlVjFJVFhCVGVYUXlTbXMxUW1sR2FWSXlhalExYmtkSGFsUnZSamx0YVZWV1lVY2lMQ0oyWVd4MVpTSTZNVEF3TURBd01EQXdNREF3TENKcFltTklZWE5vSWpvaU1VSkJNVE5DT1RVMU9VVkdRemxCTWtJMlJUQkdSRFU0T1VWRU5UaEJOVVJFT0RJNVFrRkVPVFk1TURrNE5rWXpNekU1UkRZd1JVRTNNRU5HTVRNNU55SXNJbU5vWVc1blpVbDBaVzF6SWpwYmV5SkRhR0ZwYmtsRUlqb2liRzlqWVd4YmVYbGRJaXdpUVdSa2NtVnpjeUk2SW14dlkyRnNXM2w1WFRNek1rSnlPRXRMY1RWbk5EZGhhM05hZG0xMVEwTjNOakoxYjBNelNGTmlOaUlzSWxCbFpYSkRhR0ZwYmtsRUlqb2liRzlqWVd3aUxDSlFaV1Z5UTJoaGFXNUNZV3hoYm1ObElqb3RNVEl3TURBd01EQXdNREF3ZlYxOSIsInJlY2VpcHRIYXNoIjoiREU3MTRCRjJFOTQ1Rjg1MTFDNzA5RUUzNUE2MzYyOUMzQzczRDkyQkQyNzU0QjdCNTJBQkY0QzkzOTBCODQyRiJ9&quot;
    }, {
        &quot;key&quot;: &quot;LzEvdG9rZW5iYXNpYy5Bc3NldENoYW5nZQ==&quot;,
        &quot;value&quot;: &quot;eyJuYW1lIjoidG9rZW5iYXNpYy5Bc3NldENoYW5nZSIsImNvbnRyYWN0QWRkcmVzcyI6ImxvY2FsSExEaHF5b0oxdlJ1bzhyZTlHeEZBRlUyQmtzdzJrTnVwIiwicmVjZWlwdEJ5dGVzIjoiZXlKMlpYSnphVzl1SWpvaU1pNHhJaXdpZEhsd1pTSTZJbVJsYzNSeWIza2lMQ0owYjJ0bGJpSTZJbXh2WTJGc1FVcHlZbXMyVjJSbU4xUkRZblZ1Y2xoWVV6VnJTM1ppVjFaemVtaERNVlJCSWl3aVpuSnZiU0k2SW14dlkyRnNSVlJMTjFwb09XaE9VMUJ5UlV0a2JVTm5ia2hFZEVaUVlYUmpjemxYZDFaTUlpd2lkRzhpT2lKc2IyTmhiRnQ1ZVYxSVRYQlRlWFF5U21zMVFtbEdhVkl5YWpRMWJrZEhhbFJ2UmpsdGFWVldZVWNpTENKMllXeDFaU0k2TVRBd01EQXdNREF3TURBd0xDSnBZbU5JWVhOb0lqb2lNVUpCTVROQ09UVTFPVVZHUXpsQk1rSTJSVEJHUkRVNE9VVkVOVGhCTlVSRU9ESTVRa0ZFT1RZNU1EazROa1l6TXpFNVJEWXdSVUUzTUVOR01UTTVOeUlzSW1Ob1lXNW5aVWwwWlcxeklqcGJleUpEYUdGcGJrbEVJam9pYkc5allXd2lMQ0pCWkdSeVpYTnpJam9pYkc5allXd3pNekpDY2poTFMzRTFaelEzWVd0elduWnRkVU5EZHpZeWRXOURNMGhUWWpZaUxDSlFaV1Z5UTJoaGFXNUpSQ0k2SW14dlkyRnNXM2w1WFNJc0lsQmxaWEpEYUdGcGJrSmhiR0Z1WTJVaU9qRXlNREF3TURBd01EQXdNSDFkZlE9PSIsInJlY2VpcHRIYXNoIjoiQ0ZGQ0RCNjUzQjk5NDRDNDUwOERBRDc1M0VCMTk1ODU3RUE0NjE5RTA4MDk0RUYzNDcwRDQ3OTBBNkY3Q0U0MCJ9&quot;
    }]
}
]'>Copy</button><pre><code>./bcc query -k /ibc/1BA13B9559EFC9A2B6E0FD589ED58A5DD829BAD9690986F3319D60EA70CF1397/packets

返回结果如下:
OK
Response: 
  Code: 200
  Key: /ibc/1BA13B9559EFC9A2B6E0FD589ED58A5DD829BAD9690986F3319D60EA70CF1397/packets
 Value: [
 ......,{
    &quot;fromChainID&quot;: &quot;local&quot;,
    &quot;toChainID&quot;: &quot;local[SmartCity]&quot;,
    &quot;queueID&quot;: &quot;&quot;,
    &quot;seq&quot;: 0,
    &quot;orgID&quot;: &quot;orgJgaGConUyK81zibntUBjQ33PKctpk1K1G&quot;,
    &quot;contractName&quot;: &quot;token-basic&quot;,
    &quot;ibcHash&quot;: &quot;1BA13B9559EFC9A2B6E0FD589ED58A5DD829BAD9690986F3319D60EA70CF1397&quot;,
    &quot;type&quot;: &quot;tcctx&quot;,
    &quot;state&quot;: {
        &quot;status&quot;: &quot;NoAck&quot;,
        &quot;tag&quot;: &quot;Confirmed&quot;,
        &quot;log&quot;: &quot;&quot;
    },
    &quot;receipts&quot;: [{
        &quot;key&quot;: &quot;LzAvc3RkOjp0cmFuc2Zlcg==&quot;,
        &quot;value&quot;: &quot;eyJuYW1lIjoic3RkOjp0cmFuc2ZlciIsImNvbnRyYWN0QWRkcmVzcyI6ImxvY2FsSExEaHF5b0oxdlJ1bzhyZTlHeEZBRlUyQmtzdzJrTnVwIiwicmVjZWlwdEJ5dGVzIjoiZXlKMGIydGxiaUk2SW14dlkyRnNRVXB5WW1zMlYyUm1OMVJEWW5WdWNsaFlVelZyUzNaaVYxWnplbWhETVZSQklpd2labkp2YlNJNklteHZZMkZzUlZSTE4xcG9PV2hPVTFCeVJVdGtiVU5uYmtoRWRFWlFZWFJqY3psWGQxWk1JaXdpZEc4aU9pSnNiMk5oYkRNek1rSnlPRXRMY1RWbk5EZGhhM05hZG0xMVEwTjNOakoxYjBNelNGTmlOaUlzSW5aaGJIVmxJam94TURBd01EQXdNREF3TURBc0ltNXZkR1VpT2lKc2IyTnJPaUo5IiwicmVjZWlwdEhhc2giOiIyQTJGMDJBMzU4NzRBMDcyQUY4RjA5MjJENTc4NjQ5RTRBOERDQjkzQjQ0RUU4ODRGN0U5OURCMjQ1ODEzMTM4In0=&quot;
    }, {
        &quot;key&quot;: &quot;LzEvdG9rZW5iYXNpYy5Bc3NldENoYW5nZQ==&quot;,
        &quot;value&quot;: &quot;eyJuYW1lIjoidG9rZW5iYXNpYy5Bc3NldENoYW5nZSIsImNvbnRyYWN0QWRkcmVzcyI6ImxvY2FsSExEaHF5b0oxdlJ1bzhyZTlHeEZBRlUyQmtzdzJrTnVwIiwicmVjZWlwdEJ5dGVzIjoiZXlKMlpYSnphVzl1SWpvaU1pNHhJaXdpZEhsd1pTSTZJbXh2WTJzaUxDSjBiMnRsYmlJNklteHZZMkZzUVVweVltczJWMlJtTjFSRFluVnVjbGhZVXpWclMzWmlWMVp6ZW1oRE1WUkJJaXdpWm5KdmJTSTZJbXh2WTJGc1JWUkxOMXBvT1doT1UxQnlSVXRrYlVObmJraEVkRVpRWVhSamN6bFhkMVpNSWl3aWRHOGlPaUpzYjJOaGJGdDVlVjFJVFhCVGVYUXlTbXMxUW1sR2FWSXlhalExYmtkSGFsUnZSamx0YVZWV1lVY2lMQ0oyWVd4MVpTSTZNVEF3TURBd01EQXdNREF3TENKcFltTklZWE5vSWpvaU1VSkJNVE5DT1RVMU9VVkdRemxCTWtJMlJUQkdSRFU0T1VWRU5UaEJOVVJFT0RJNVFrRkVPVFk1TURrNE5rWXpNekU1UkRZd1JVRTNNRU5HTVRNNU55SXNJbU5vWVc1blpVbDBaVzF6SWpwYmV5SkRhR0ZwYmtsRUlqb2liRzlqWVd3aUxDSkJaR1J5WlhOeklqb2liRzlqWVd3ek16SkNjamhMUzNFMVp6UTNZV3R6V25adGRVTkRkell5ZFc5RE0waFRZallpTENKUVpXVnlRMmhoYVc1SlJDSTZJbXh2WTJGc1czbDVYU0lzSWxCbFpYSkRhR0ZwYmtKaGJHRnVZMlVpT2pJd01EQXdNREF3TURBd2ZWMTkiLCJyZWNlaXB0SGFzaCI6IkVGOTk4QjVCRjRCRDQ3OTIxQzg1QzAxNENENUM4NzQyNzU3OEMxOEQzM0E3NUQ5Qjk4RkY0NkZBNjY0RUZDN0MifQ==&quot;
    }, {
        &quot;key&quot;: &quot;LzEvc3RkOjp0cmFuc2Zlcg==&quot;,
        &quot;value&quot;: &quot;eyJuYW1lIjoic3RkOjp0cmFuc2ZlciIsImNvbnRyYWN0QWRkcmVzcyI6ImxvY2FsW3l5XUFKcmJrNldkZjdUQ2J1bnJYWFM1a0t2YldWc3poQzFUQSIsInJlY2VpcHRCeXRlcyI6ImV5SjBiMnRsYmlJNklteHZZMkZzVzNsNVhVRktjbUpyTmxka1pqZFVRMkoxYm5KWVdGTTFhMHQyWWxkV2MzcG9RekZVUVNJc0ltWnliMjBpT2lKc2IyTmhiRnQ1ZVYwek16SkNjamhMUzNFMVp6UTNZV3R6V25adGRVTkRkell5ZFc5RE0waFRZallpTENKMGJ5STZJbXh2WTJGc1czbDVYVWhOY0ZONWRESkthelZDYVVacFVqSnFORFZ1UjBkcVZHOUdPVzFwVlZaaFJ5SXNJblpoYkhWbElqb3hNREF3TURBd01EQXdNREI5IiwicmVjZWlwdEhhc2giOiIzMDJENDc0OTFCNDIyNDQzQUFBODFCRkFBQjA4MzQwOTJCMDY4OTYwOEFCQjUyMzhERTM5RjI2NzlGNjQ4Q0QyIn0=&quot;
    }, {
        &quot;key&quot;: &quot;LzIvdG9rZW5iYXNpYy5Bc3NldENoYW5nZQ==&quot;,
        &quot;value&quot;: &quot;eyJuYW1lIjoidG9rZW5iYXNpYy5Bc3NldENoYW5nZSIsImNvbnRyYWN0QWRkcmVzcyI6ImxvY2FsW3l5XUFKcmJrNldkZjdUQ2J1bnJYWFM1a0t2YldWc3poQzFUQSIsInJlY2VpcHRCeXRlcyI6ImV5SjJaWEp6YVc5dUlqb2lNaTR4SWl3aWRIbHdaU0k2SW5KbFkyRnpkQ0lzSW5SdmEyVnVJam9pYkc5allXeGJlWGxkUVVweVltczJWMlJtTjFSRFluVnVjbGhZVXpWclMzWmlWMVp6ZW1oRE1WUkJJaXdpWm5KdmJTSTZJbXh2WTJGc1JWUkxOMXBvT1doT1UxQnlSVXRrYlVObmJraEVkRVpRWVhSamN6bFhkMVpNSWl3aWRHOGlPaUpzYjJOaGJGdDVlVjFJVFhCVGVYUXlTbXMxUW1sR2FWSXlhalExYmtkSGFsUnZSamx0YVZWV1lVY2lMQ0oyWVd4MVpTSTZNVEF3TURBd01EQXdNREF3TENKcFltTklZWE5vSWpvaU1VSkJNVE5DT1RVMU9VVkdRemxCTWtJMlJUQkdSRFU0T1VWRU5UaEJOVVJFT0RJNVFrRkVPVFk1TURrNE5rWXpNekU1UkRZd1JVRTNNRU5HTVRNNU55SXNJbU5vWVc1blpVbDBaVzF6SWpwYmV5SkRhR0ZwYmtsRUlqb2liRzlqWVd4YmVYbGRJaXdpUVdSa2NtVnpjeUk2SW14dlkyRnNXM2w1WFRNek1rSnlPRXRMY1RWbk5EZGhhM05hZG0xMVEwTjNOakoxYjBNelNGTmlOaUlzSWxCbFpYSkRhR0ZwYmtsRUlqb2liRzlqWVd3aUxDSlFaV1Z5UTJoaGFXNUNZV3hoYm1ObElqb3RNVEl3TURBd01EQXdNREF3ZlYxOSIsInJlY2VpcHRIYXNoIjoiREU3MTRCRjJFOTQ1Rjg1MTFDNzA5RUUzNUE2MzYyOUMzQzczRDkyQkQyNzU0QjdCNTJBQkY0QzkzOTBCODQyRiJ9&quot;
    }, {
        &quot;key&quot;: &quot;LzEvdG9rZW5iYXNpYy5Bc3NldENoYW5nZQ==&quot;,
        &quot;value&quot;: &quot;eyJuYW1lIjoidG9rZW5iYXNpYy5Bc3NldENoYW5nZSIsImNvbnRyYWN0QWRkcmVzcyI6ImxvY2FsSExEaHF5b0oxdlJ1bzhyZTlHeEZBRlUyQmtzdzJrTnVwIiwicmVjZWlwdEJ5dGVzIjoiZXlKMlpYSnphVzl1SWpvaU1pNHhJaXdpZEhsd1pTSTZJbVJsYzNSeWIza2lMQ0owYjJ0bGJpSTZJbXh2WTJGc1FVcHlZbXMyVjJSbU4xUkRZblZ1Y2xoWVV6VnJTM1ppVjFaemVtaERNVlJCSWl3aVpuSnZiU0k2SW14dlkyRnNSVlJMTjFwb09XaE9VMUJ5UlV0a2JVTm5ia2hFZEVaUVlYUmpjemxYZDFaTUlpd2lkRzhpT2lKc2IyTmhiRnQ1ZVYxSVRYQlRlWFF5U21zMVFtbEdhVkl5YWpRMWJrZEhhbFJ2UmpsdGFWVldZVWNpTENKMllXeDFaU0k2TVRBd01EQXdNREF3TURBd0xDSnBZbU5JWVhOb0lqb2lNVUpCTVROQ09UVTFPVVZHUXpsQk1rSTJSVEJHUkRVNE9VVkVOVGhCTlVSRU9ESTVRa0ZFT1RZNU1EazROa1l6TXpFNVJEWXdSVUUzTUVOR01UTTVOeUlzSW1Ob1lXNW5aVWwwWlcxeklqcGJleUpEYUdGcGJrbEVJam9pYkc5allXd2lMQ0pCWkdSeVpYTnpJam9pYkc5allXd3pNekpDY2poTFMzRTFaelEzWVd0elduWnRkVU5EZHpZeWRXOURNMGhUWWpZaUxDSlFaV1Z5UTJoaGFXNUpSQ0k2SW14dlkyRnNXM2w1WFNJc0lsQmxaWEpEYUdGcGJrSmhiR0Z1WTJVaU9qRXlNREF3TURBd01EQXdNSDFkZlE9PSIsInJlY2VpcHRIYXNoIjoiQ0ZGQ0RCNjUzQjk5NDRDNDUwOERBRDc1M0VCMTk1ODU3RUE0NjE5RTA4MDk0RUYzNDcwRDQ3OTBBNkY3Q0U0MCJ9&quot;
    }]
}
]
</code></pre>
</figure>
<h4 id='a4b1c739'><span class='bd-content-title'>3.2.1 跨链事务数据解析<a class='anchorjs-link ' href='#a4b1c739' aria-label='Anchor' data-anchorjs-icon='#'></a></span></h4>
<p class='with-space'>根据上面的操作,我们成功拿到了一笔跨链交易的跨链事务数据,我们现在分析一下拿到的这个跨链事务数据.</p>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text='type Packet struct {
    FromChainID  string           // 发起链的链ID（A）
    ToChainID    string           // 目标链的链ID（B）
    QueueID      string           // 跨链通讯队列（A-&gt;B）
    Seq          uint64           // (A-&gt;B)这个队列上跨链通讯包序号,从0开始累加+1
    OrgID        string           // 组织ID
    ContractName string           // 合约名称
    IbcHash      types.Hash       // 跨链事务哈希,通过此哈希从区块链上确认最终执行结果
    Type         string           // 跨链通讯类型：&quot;tcctx&quot;, &quot;notify&quot;
    State        State            // 状态
    Receipts     []types.KVPair   // 当前状态下需要传递到另一侧的应用层数据
}

type State struct {
    Status string     // 状态：&quot;NoAckWanted&quot;, &quot;NoAck&quot;
    Tag    string     // 表示业务层的状态标识：
    Log    string     // 异常日志
}

注:
Type 即跨链通讯类型：&quot;tcctx&quot; 表示交易, &quot;notify&quot;表示通知

Status 即跨链事务状态：
&quot;NoAckWanted&quot;跨链通讯协议状态，申明需要接收方返回应答.
&quot;NoAck&quot; 表示跨链通讯协议状态，申明不需要接收方返回应答. 

Tag 即跨链事务的业务层状态标识: 
&quot;NotifyPending&quot; 跨链通知在发起侧的状态，声明下一步需要在目标侧执行通知业务.
&quot;Success&quot; 跨链通知在目标侧的状态，声明业务层已经完成了通知操作.
&quot;Failure&quot;跨链通知在目标侧的状态，声明无法执行业务层的通知操作，原因可能为合约版本不一致等. 
&quot;RecastPending&quot; 跨链交易在发起侧的状态，声明下一步需要在目标侧执行重铸业务，或者由枢纽链进行中转), &quot;ConfirmPending&quot; 跨链交易在中转侧及目标侧的状态，声明下一步需要在中转侧执行确认中转业务，或者需要在发起侧执行最终确认业务. 
&quot;Confirmed&quot; 跨链通知在发起侧的状态，声明业务层已经成功完成了跨链操作. 
&quot;CancelPending&quot; 跨链交易在中转侧及目标侧的状态，声明下一步需要在中转侧执行取消中转业务，或者需要在发起侧执行最终取消业务.
&quot;Canceled&quot; 跨链交易在发起侧的状态，声明业务层已经成功取消了跨链操作.'>Copy</button><pre><code class='go' lang='go'>type Packet struct {
    FromChainID  string           // 发起链的链ID（A）
    ToChainID    string           // 目标链的链ID（B）
    QueueID      string           // 跨链通讯队列（A-&gt;B）
    Seq          uint64           // (A-&gt;B)这个队列上跨链通讯包序号,从0开始累加+1
    OrgID        string           // 组织ID
    ContractName string           // 合约名称
    IbcHash      types.Hash       // 跨链事务哈希,通过此哈希从区块链上确认最终执行结果
    Type         string           // 跨链通讯类型：&quot;tcctx&quot;, &quot;notify&quot;
    State        State            // 状态
    Receipts     []types.KVPair   // 当前状态下需要传递到另一侧的应用层数据
}

type State struct {
    Status string     // 状态：&quot;NoAckWanted&quot;, &quot;NoAck&quot;
    Tag    string     // 表示业务层的状态标识：
    Log    string     // 异常日志
}

注:
Type 即跨链通讯类型：&quot;tcctx&quot; 表示交易, &quot;notify&quot;表示通知

Status 即跨链事务状态：
&quot;NoAckWanted&quot;跨链通讯协议状态，申明需要接收方返回应答.
&quot;NoAck&quot; 表示跨链通讯协议状态，申明不需要接收方返回应答. 

Tag 即跨链事务的业务层状态标识: 
&quot;NotifyPending&quot; 跨链通知在发起侧的状态，声明下一步需要在目标侧执行通知业务.
&quot;Success&quot; 跨链通知在目标侧的状态，声明业务层已经完成了通知操作.
&quot;Failure&quot;跨链通知在目标侧的状态，声明无法执行业务层的通知操作，原因可能为合约版本不一致等. 
&quot;RecastPending&quot; 跨链交易在发起侧的状态，声明下一步需要在目标侧执行重铸业务，或者由枢纽链进行中转), &quot;ConfirmPending&quot; 跨链交易在中转侧及目标侧的状态，声明下一步需要在中转侧执行确认中转业务，或者需要在发起侧执行最终确认业务. 
&quot;Confirmed&quot; 跨链通知在发起侧的状态，声明业务层已经成功完成了跨链操作. 
&quot;CancelPending&quot; 跨链交易在中转侧及目标侧的状态，声明下一步需要在中转侧执行取消中转业务，或者需要在发起侧执行最终取消业务.
&quot;Canceled&quot; 跨链交易在发起侧的状态，声明业务层已经成功取消了跨链操作.
</code></pre>
</figure>
<p class='with-space'>该跨链事务数据是由 Packet 结构的切片组成(如图上所示),一个 Packet 结构代表一个事务,完整的跨链事务一般由一个到多个这样的事务组成(通常情况通知在通知发起链只有1个这样的事务,在通知接收链有2个; 交易在交易发起链有3个这样的事务,在目标链只有2个这样的事务).</p>
<h4 id='fd1b27d9'><span class='bd-content-title'>3.2.2 跨链收据解析<a class='anchorjs-link ' href='#fd1b27d9' aria-label='Anchor' data-anchorjs-icon='#'></a></span></h4>
<p class='with-space'>在上面我们已经得到了一个跨链事务数据,里面有个字段 receipts 的切片,里面存储的数据是跨链交易的收据,其中除了跨链交易的收据还有手续费的收据,我们这里只解析跨链交易的收据:</p>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text='{
        &quot;key&quot;: &quot;LzEvdG9rZW5iYXNpYy5Bc3NldENoYW5nZQ==&quot;,
        &quot;value&quot;: &quot;eyJuYW1lIjoidG9rZW5iYXNpYy5Bc3NldENoYW5nZSIsImNvbnRyYWN0QWRkcmVzcyI6ImxvY2FsSExEaHF5b0oxdlJ1bzhyZTlHeEZBRlUyQmtzdzJrTnVwIiwicmVjZWlwdEJ5dGVzIjoiZXlKMlpYSnphVzl1SWpvaU1pNHhJaXdpZEhsd1pTSTZJbVJsYzNSeWIza2lMQ0owYjJ0bGJpSTZJbXh2WTJGc1FVcHlZbXMyVjJSbU4xUkRZblZ1Y2xoWVV6VnJTM1ppVjFaemVtaERNVlJCSWl3aVpuSnZiU0k2SW14dlkyRnNSVlJMTjFwb09XaE9VMUJ5UlV0a2JVTm5ia2hFZEVaUVlYUmpjemxYZDFaTUlpd2lkRzhpT2lKc2IyTmhiRnQ1ZVYxSVRYQlRlWFF5U21zMVFtbEdhVkl5YWpRMWJrZEhhbFJ2UmpsdGFWVldZVWNpTENKMllXeDFaU0k2TVRBd01EQXdNREF3TURBd0xDSnBZbU5JWVhOb0lqb2lNVUpCTVROQ09UVTFPVVZHUXpsQk1rSTJSVEJHUkRVNE9VVkVOVGhCTlVSRU9ESTVRa0ZFT1RZNU1EazROa1l6TXpFNVJEWXdSVUUzTUVOR01UTTVOeUlzSW1Ob1lXNW5aVWwwWlcxeklqcGJleUpEYUdGcGJrbEVJam9pYkc5allXd2lMQ0pCWkdSeVpYTnpJam9pYkc5allXd3pNekpDY2poTFMzRTFaelEzWVd0elduWnRkVU5EZHpZeWRXOURNMGhUWWpZaUxDSlFaV1Z5UTJoaGFXNUpSQ0k2SW14dlkyRnNXM2w1WFNJc0lsQmxaWEpEYUdGcGJrSmhiR0Z1WTJVaU9qRXlNREF3TURBd01EQXdNSDFkZlE9PSIsInJlY2VpcHRIYXNoIjoiQ0ZGQ0RCNjUzQjk5NDRDNDUwOERBRDc1M0VCMTk1ODU3RUE0NjE5RTA4MDk0RUYzNDcwRDQ3OTBBNkY3Q0U0MCJ9&quot;
    }'>Copy</button><pre><code>{
        &quot;key&quot;: &quot;LzEvdG9rZW5iYXNpYy5Bc3NldENoYW5nZQ==&quot;,
        &quot;value&quot;: &quot;eyJuYW1lIjoidG9rZW5iYXNpYy5Bc3NldENoYW5nZSIsImNvbnRyYWN0QWRkcmVzcyI6ImxvY2FsSExEaHF5b0oxdlJ1bzhyZTlHeEZBRlUyQmtzdzJrTnVwIiwicmVjZWlwdEJ5dGVzIjoiZXlKMlpYSnphVzl1SWpvaU1pNHhJaXdpZEhsd1pTSTZJbVJsYzNSeWIza2lMQ0owYjJ0bGJpSTZJbXh2WTJGc1FVcHlZbXMyVjJSbU4xUkRZblZ1Y2xoWVV6VnJTM1ppVjFaemVtaERNVlJCSWl3aVpuSnZiU0k2SW14dlkyRnNSVlJMTjFwb09XaE9VMUJ5UlV0a2JVTm5ia2hFZEVaUVlYUmpjemxYZDFaTUlpd2lkRzhpT2lKc2IyTmhiRnQ1ZVYxSVRYQlRlWFF5U21zMVFtbEdhVkl5YWpRMWJrZEhhbFJ2UmpsdGFWVldZVWNpTENKMllXeDFaU0k2TVRBd01EQXdNREF3TURBd0xDSnBZbU5JWVhOb0lqb2lNVUpCTVROQ09UVTFPVVZHUXpsQk1rSTJSVEJHUkRVNE9VVkVOVGhCTlVSRU9ESTVRa0ZFT1RZNU1EazROa1l6TXpFNVJEWXdSVUUzTUVOR01UTTVOeUlzSW1Ob1lXNW5aVWwwWlcxeklqcGJleUpEYUdGcGJrbEVJam9pYkc5allXd2lMQ0pCWkdSeVpYTnpJam9pYkc5allXd3pNekpDY2poTFMzRTFaelEzWVd0elduWnRkVU5EZHpZeWRXOURNMGhUWWpZaUxDSlFaV1Z5UTJoaGFXNUpSQ0k2SW14dlkyRnNXM2w1WFNJc0lsQmxaWEpEYUdGcGJrSmhiR0Z1WTJVaU9qRXlNREF3TURBd01EQXdNSDFkZlE9PSIsInJlY2VpcHRIYXNoIjoiQ0ZGQ0RCNjUzQjk5NDRDNDUwOERBRDc1M0VCMTk1ODU3RUE0NjE5RTA4MDk0RUYzNDcwRDQ3OTBBNkY3Q0U0MCJ9&quot;
    }
</code></pre>
</figure>
<p class='with-space'>上面这段收据是从 receipts 字段中拿到的一个收据,通过 <code>base64解码</code>  我们可以知道这是一个资产变更收据即收据名称为 tokenbasic.AssetChange <code>,我们将 value 中的值通过</code> base64解码`后得到收据信息:</p>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text='{&quot;name&quot;:&quot;tokenbasic.AssetChange&quot;,&quot;contractAddress&quot;:&quot;localHLDhqyoJ1vRuo8re9GxFAFU2Bksw2kNup&quot;,&quot;receiptBytes&quot;:&quot;eyJ2ZXJzaW9uIjoiMi4xIiwidHlwZSI6ImRlc3Ryb3kiLCJ0b2tlbiI6ImxvY2FsQUpyYms2V2RmN1RDYnVuclhYUzVrS3ZiV1ZzemhDMVRBIiwiZnJvbSI6ImxvY2FsRVRLN1poOWhOU1ByRUtkbUNnbkhEdEZQYXRjczlXd1ZMIiwidG8iOiJsb2NhbFt5eV1ITXBTeXQySms1QmlGaVIyajQ1bkdHalRvRjltaVVWYUciLCJ2YWx1ZSI6MTAwMDAwMDAwMDAwLCJpYmNIYXNoIjoiMUJBMTNCOTU1OUVGQzlBMkI2RTBGRDU4OUVENThBNUREODI5QkFEOTY5MDk4NkYzMzE5RDYwRUE3MENGMTM5NyIsImNoYW5nZUl0ZW1zIjpbeyJDaGFpbklEIjoibG9jYWwiLCJBZGRyZXNzIjoibG9jYWwzMzJCcjhLS3E1ZzQ3YWtzWnZtdUNDdzYydW9DM0hTYjYiLCJQZWVyQ2hhaW5JRCI6ImxvY2FsW3l5XSIsIlBlZXJDaGFpbkJhbGFuY2UiOjEyMDAwMDAwMDAwMH1dfQ==&quot;,&quot;receiptHash&quot;:&quot;CFFCDB653B9944C4508DAD753EB195857EA4619E08094EF3470D4790A6F7CE40&quot;}'>Copy</button><pre><code class='go' lang='go'>{&quot;name&quot;:&quot;tokenbasic.AssetChange&quot;,&quot;contractAddress&quot;:&quot;localHLDhqyoJ1vRuo8re9GxFAFU2Bksw2kNup&quot;,&quot;receiptBytes&quot;:&quot;eyJ2ZXJzaW9uIjoiMi4xIiwidHlwZSI6ImRlc3Ryb3kiLCJ0b2tlbiI6ImxvY2FsQUpyYms2V2RmN1RDYnVuclhYUzVrS3ZiV1ZzemhDMVRBIiwiZnJvbSI6ImxvY2FsRVRLN1poOWhOU1ByRUtkbUNnbkhEdEZQYXRjczlXd1ZMIiwidG8iOiJsb2NhbFt5eV1ITXBTeXQySms1QmlGaVIyajQ1bkdHalRvRjltaVVWYUciLCJ2YWx1ZSI6MTAwMDAwMDAwMDAwLCJpYmNIYXNoIjoiMUJBMTNCOTU1OUVGQzlBMkI2RTBGRDU4OUVENThBNUREODI5QkFEOTY5MDk4NkYzMzE5RDYwRUE3MENGMTM5NyIsImNoYW5nZUl0ZW1zIjpbeyJDaGFpbklEIjoibG9jYWwiLCJBZGRyZXNzIjoibG9jYWwzMzJCcjhLS3E1ZzQ3YWtzWnZtdUNDdzYydW9DM0hTYjYiLCJQZWVyQ2hhaW5JRCI6ImxvY2FsW3l5XSIsIlBlZXJDaGFpbkJhbGFuY2UiOjEyMDAwMDAwMDAwMH1dfQ==&quot;,&quot;receiptHash&quot;:&quot;CFFCDB653B9944C4508DAD753EB195857EA4619E08094EF3470D4790A6F7CE40&quot;}
</code></pre>
</figure>
<p class='with-space'>然后我们再把 <code>receiptBytes</code> 字段的值通过 base64解码 后得到收据:</p>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text='{&quot;version&quot;:&quot;2.1&quot;,&quot;type&quot;:&quot;destroy&quot;,&quot;token&quot;:&quot;localAJrbk6Wdf7TCbunrXXS5kKvbWVszhC1TA&quot;,&quot;from&quot;:&quot;localETK7Zh9hNSPrEKdmCgnHDtFPatcs9WwVL&quot;,&quot;to&quot;:&quot;local[SmartCity]HMpSyt2Jk5BiFiR2j45nGGjToF9miUVaG&quot;,&quot;value&quot;:100000000000,&quot;ibcHash&quot;:&quot;1BA13B9559EFC9A2B6E0FD589ED58A5DD829BAD9690986F3319D60EA70CF1397&quot;,&quot;changeItems&quot;:[{&quot;ChainID&quot;:&quot;local&quot;,&quot;Address&quot;:&quot;local332Br8KKq5g47aksZvmuCCw62uoC3HSb6&quot;,&quot;PeerChainID&quot;:&quot;local[SmartCity]&quot;,&quot;PeerChainBalance&quot;:120000000000}]}

注: 
type 为资产变更的类型:
&quot;lock&quot; 表示在交易发起链,该笔资金已被锁定
&quot;recast&quot; 表示在交易目标链,该笔资金已被重铸
&quot;destory&quot; 表示在交易发起链,该笔资金已被销毁

PeerChainID 为对侧链的ChainID

PeerChainBalance 为对侧链的该币种的总余额(这是整个链的总余额, 币种为 token字段对应的币种)'>Copy</button><pre><code class='go' lang='go'>{&quot;version&quot;:&quot;2.1&quot;,&quot;type&quot;:&quot;destroy&quot;,&quot;token&quot;:&quot;localAJrbk6Wdf7TCbunrXXS5kKvbWVszhC1TA&quot;,&quot;from&quot;:&quot;localETK7Zh9hNSPrEKdmCgnHDtFPatcs9WwVL&quot;,&quot;to&quot;:&quot;local[SmartCity]HMpSyt2Jk5BiFiR2j45nGGjToF9miUVaG&quot;,&quot;value&quot;:100000000000,&quot;ibcHash&quot;:&quot;1BA13B9559EFC9A2B6E0FD589ED58A5DD829BAD9690986F3319D60EA70CF1397&quot;,&quot;changeItems&quot;:[{&quot;ChainID&quot;:&quot;local&quot;,&quot;Address&quot;:&quot;local332Br8KKq5g47aksZvmuCCw62uoC3HSb6&quot;,&quot;PeerChainID&quot;:&quot;local[SmartCity]&quot;,&quot;PeerChainBalance&quot;:120000000000}]}

注: 
type 为资产变更的类型:
&quot;lock&quot; 表示在交易发起链,该笔资金已被锁定
&quot;recast&quot; 表示在交易目标链,该笔资金已被重铸
&quot;destory&quot; 表示在交易发起链,该笔资金已被销毁

PeerChainID 为对侧链的ChainID

PeerChainBalance 为对侧链的该币种的总余额(这是整个链的总余额, 币种为 token字段对应的币种)
</code></pre>
</figure>
<p class='with-space'>注:在 receipts 字段中有多个资产变更收据,这是因为它把前一个链发送给它的收据给保存到该字段了(即第二个 packet 中的收据包含第一个 packet 的收据, 第三个 packet 中的收据包含第二个 packet 中的收据).总的来说如果你想看这笔跨链交易最后的收据,你应该看最后一个资产变更收据.</p>
<h2 id='a70a71f0'><span class='bd-content-title'>4. 结果查询<a class='anchorjs-link ' href='#a70a71f0' aria-label='Anchor' data-anchorjs-icon='#'></a></span></h2>
<p class='with-space'>通过上面的到的 <code>ibcHash</code>  <code>1BA13B9559EFC9A2B6E0FD589ED58A5DD829BAD9690986F3319D60EA70CF1397</code> ,我们使用以下命令可以得到这笔跨链事务的当前状态.</p>
<figure class='highlight'>
<button type='button' class='btn-clipboard' data-original-title='Copy to clipboard' data-clipboard-action='copy' data-toggle='tooltip' data-placement='top' title='Copy to clipboard' data-clipboard-text='./bcc query -k /ibc/1BA13B9559EFC9A2B6E0FD589ED58A5DD829BAD9690986F3319D60EA70CF1397/state

返回结果如下:
OK
Response: 
  Code: 200
  Key: /ibc/1BA13B9559EFC9A2B6E0FD589ED58A5DD829BAD9690986F3319D60EA70CF1397/state
  Value: {&quot;status&quot;:&quot;NoAck&quot;,&quot;tag&quot;:&quot;Confirmed&quot;,&quot;log&quot;:&quot;&quot;}'>Copy</button><pre><code>./bcc query -k /ibc/1BA13B9559EFC9A2B6E0FD589ED58A5DD829BAD9690986F3319D60EA70CF1397/state

返回结果如下:
OK
Response: 
  Code: 200
  Key: /ibc/1BA13B9559EFC9A2B6E0FD589ED58A5DD829BAD9690986F3319D60EA70CF1397/state
  Value: {&quot;status&quot;:&quot;NoAck&quot;,&quot;tag&quot;:&quot;Confirmed&quot;,&quot;log&quot;:&quot;&quot;}
</code></pre>
</figure>
            </main>
            <div class="d-none d-lg-block side-nav py-2 py-md-5">
                <a href="https://github.com/bcbchain/docs/blob/master/docs/zh-cn/02-BCB网络\BCB侧链\04-跨链交易.md" class="contribution-link d-block">Improve this Doc</a>
                <div class="side-nav-text">In this article</div>
                <div id="navbar-sidenav">
                    <nav class='nav nav-pills flex-column'>
<a class='ml--2 d-none my-1 nav-link' href='#fe406908'>跨链转账</a>
<nav class='nav nav-pills flex-column'>
<a class='ml-0 my-1 nav-link' href='#a8c7183e'>1. 准备工作</a>
<nav class='nav nav-pills flex-column'>
<a class='ml-2 my-1 nav-link' href='#f0e412fa'>1.1 准备账户</a>
</nav>
<a class='ml-0 my-1 nav-link' href='#ca334763'>2. 基础代币跨链转账</a>
<nav class='nav nav-pills flex-column'>
<a class='ml-2 my-1 nav-link' href='#b19d279b'>2.1 主链到侧链转账</a>
<a class='ml-2 my-1 nav-link' href='#e8a49fb4'>2.2 侧链到主链转账</a>
<a class='ml-2 my-1 nav-link' href='#ce3f4f70'>2.3 侧链到侧链转账</a>
<a class='ml-2 my-1 nav-link' href='#e5dfcda4'>2.4 代币激活</a>
</nav>
<a class='ml-0 my-1 nav-link' href='#e8ef0be5'>3. 跨链事务</a>
<nav class='nav nav-pills flex-column'>
<a class='ml-2 my-1 nav-link' href='#be99796a'>3.1 跨链事务Hash获取</a>
<a class='ml-2 my-1 nav-link' href='#c2f8b366'>3.2 跨链事务数据</a>
</nav>
<a class='ml-0 my-1 nav-link' href='#a70a71f0'>4. 结果查询</a>
</nav>
</nav>
                </div>
            </div>
        </div>
    </div>
    <div class="lightbulb" title="Turn On/Off" onclick="turnOff()">
        <i class="far fa-lightbulb"></i>
    </div>
    <footer>
    </footer>
    <script src="/lib/jquery/jquery.min.js"></script>
    <script src="/lib/popper.js/popper.min.js"></script>
    <script src="/lib/bootstrap/js/bootstrap.min.js"></script>
    <script src="/js/jquery.lazyload.min.js"></script>
    <script src="/js/utility.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/highlight.min.js"></script>
    <script src="/js/text-autospace.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-130525731-2"></script>
    <script src="/js/site.min.js?v=20191106"></script>
    <script>
        //适用于FAQ的根据标题展开收缩
        if (false) {
            $("h2").click(function (e) {
                $(".div-collapse").not($(e.target).parents("h2").next()).hide("fast");
                $(e.target).parents("h2").next().toggle("fast");
            });
        }

        $("#sInput").bind({
            focus: function () {
                searchBar();
            },
            keyup: function (e) {
                clearTimeout();
                if (e.which == 13) {
                    searchBar();
                }
                setTimeout(searchBar, 300);
            },
            paste: function () {
                searchBar();
            }
        });

        $(".search-de").click(function () {
            $("#sInput").val("");
            $("#sResult").html("");
        })

        var url = window.location.origin;

        function searchBar() {
            k = $("#sInput").val();
            l = localStorage.getItem("lang") || navigator.language || "en-us";
            if (!k) $("#sResult").html("");
            $.ajax({
                type: "GET",
                url: url + "/?k=" + encodeURIComponent(k) + "&l=" + encodeURIComponent(l),
                contentType: "application/json;charset=utf-8",
                dataType: "json",
                success: function (data) {
                    var html = ""

                    if (data.length == 0) {
                        html += "<li><a><span> No results found. </span></a></li > ";
                    }
                    for (i in data) {
                        var _data = data[i];
                        html += "<li><a href=" + _data.Link + "><strong>" + _data.Title + "</strong><br />";
                        html += "<span>" + _data.Line + "</span></a></li>";
                    }
                    $("#sResult").html(html);
                },
                fail: function () {
                    alert("fail");
                }
            });
        }

    </script>
</body>
</html>
